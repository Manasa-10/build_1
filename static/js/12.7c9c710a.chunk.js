(this.webpackJsonpwakefit=this.webpackJsonpwakefit||[]).push([[12],{309:function(e,t,r){"use strict";r.d(t,"b",(function(){return o}));var a=r(0),s=r.n(a),i=r(31);const o=(e,t)=>t._original[e.id]&&String(Object(i.c)(String(t._original[e.id]))).toLocaleLowerCase().includes(e.value.toLocaleLowerCase());t.a=e=>e.value?s.a.createElement("div",null,Object(i.c)(e.value)):""},312:function(e,t,r){"use strict";var a=r(0),s=r.n(a);r(313);class i extends a.Component{render(){let e=this.props,t=e.offset,r=e.limit,a=e.total,i=e.onPrevClick,o=e.onNextClick,l=e.dropDownValues,n=e.onLimitChange,d=e.filtered,c=e.filteredData;return s.a.createElement("div",{className:"pagination-container"},s.a.createElement("button",{className:"navigation-button pointer",disabled:0===t,onClick:()=>i("prev")},s.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),s.a.createElement("div",{className:"pagination-text"},t," to ",t+r<=a?t+r:a," of ",a),s.a.createElement("button",{className:"navigation-button pointer",disabled:t+r>=a,onClick:()=>o("next")},s.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})),Array.isArray(l)&&l.length>0&&s.a.createElement("select",{className:"custom-dropdown",onChange:n,value:r},l.map((e,t)=>s.a.createElement("option",{key:t,value:e},e))),Array.isArray(d)&&d.length>0&&Array.isArray(c)&&c.length>0&&s.a.createElement("div",{className:"matched-records-data"},s.a.createElement("b",null,"Matched Records :")," ",c.length))}}i.defaultProps={offset:0,limit:0,total:0,dropDownValues:[]},t.a=i},313:function(e,t,r){},329:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(0);function s(e){var t=e.controlled,r=e.default,s=(e.name,a.useRef(void 0!==t).current),i=a.useState(r),o=i[0],l=i[1];return[s?t:o,a.useCallback((function(e){s||l(e)}),[])]}},330:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return s}));const a=[10,25,50,75,100],s=25},331:function(e,t,r){"use strict";var a=r(340);var s=r(341);function i(e,t){return Object(a.a)(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],a=!0,s=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(n){s=!0,i=n}finally{try{a||null==l.return||l.return()}finally{if(s)throw i}}return r}}(e,t)||Object(s.a)()}r.d(t,"a",(function(){return i}))},340:function(e,t,r){"use strict";function a(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return a}))},341:function(e,t,r){"use strict";function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}r.d(t,"a",(function(){return a}))},343:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));const a=[{label:"Wakefit",slug:"wakefit",role:["OC","RT","C"]},{label:"Affiliate",slug:"affiliate",role:["OC","RT","C"]},{label:"Affiliate FBA",slug:"affiliate_fba",role:["RT"]}],s=e=>a.filter(t=>t.role.includes(e))},362:function(e,t,r){"use strict";var a=r(0),s=r.n(a),i=r(708);const o=[{id:1,label:"Open",isActive:1},{id:2,label:"Re-Open",isActive:1},{id:3,label:"Resolved",isActive:1},{id:4,label:"Closed",isActive:1},{id:5,label:"Duplicate",isActive:1},{id:6,label:"Inprogress",isActive:1},{id:7,label:"Pending",isActive:1},{id:8,label:"Internal",isActive:1}];r.d(t,"a",(function(){return l}));const l=e=>{let t=e.original;return s.a.createElement("div",null,s.a.createElement("div",{className:"break-word comment-color"},e.value),s.a.createElement("div",{className:"tickets-container"},t.tickets&&Array.isArray(t.tickets)&&t.tickets.map((e,t)=>s.a.createElement(i.a,{title:e.title||"",placement:"top",arrow:!0},s.a.createElement("a",{className:"custom-badge",key:"ticket-".concat(t,"-id-").concat(e.id),href:"".concat("http://api.wakefit.asia/","helpdesk/tickets/").concat(e.id),target:"_blank",without:!0,rel:"noopener noreferrer"},"Wakefit - ",e.id," - ",(e=>{let t=o.filter(t=>t.id===e);return t=t.length>0?t[0]:{},t})(e.status).label)))))}},404:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));const a=[{id:1,label:"Awaiting Confirm dimensions from CX",isActive:!0},{id:2,label:"Due to no communication with COD customer in 3 days",isActive:!0},{id:3,label:"Customer number is incorrect",isActive:!0},{id:4,label:"Future delivery",isActive:!0},{id:5,label:"Service is not available on given pin code",isActive:!0},{id:6,label:"Others",isActive:!0},{id:7,label:"COD amount is more than 20K",isActive:!0},{id:8,label:"Auto - Cancel To Hold",isActive:!0},{id:9,label:"Item Price is Zero",isActive:!0}],s=()=>a},623:function(e,t,r){},624:function(e,t,r){},701:function(e,t,r){"use strict";r.r(t);var a=r(0),s=r.n(a),i=r(21),o=r(16),l=(r(623),r(669)),n=r(9),d=r(136),c=(r(184),r(624),r(145)),u=r(32),m=r(312),h=r(138),p=r(31),f=r(404),g=r(309),b=r(356),_=r(358),v=r(338),y=r(359),O=r(362),C=r(141),A=r(330);class S extends s.a.Component{constructor(e){super(e),this.resetTable=()=>{this.setState({enableSubmit:!1,bulkOrder:[],isUpdatingBulk:!1,paymentTrackId:{},orderStatusData:{},currentStatusData:{},urgentDelivery:{},editingCartIndex:-1,errors:{orm_order_status:"",hold_reason_id:"",status_comments:"",status_date:""}})},this.resetPagination=()=>{this.setState({offset:0,limit:A.a,total:this.props.data.count||0})},this.onLimitChange=e=>{this.setState({limit:Number(e.target.value)},()=>this.handleClick("reset"))},this.handleClick=e=>{let t=this.state,r=t.limit,a=t.offset,s=t.total,i=this.props,o=i.activePlatform,l=i.ActiveTab,n=i.userRole,d=i.cetId,c=i.userDetails;this.setState({offset:"next"===e?a+r<s?a+r:a:"prev"===e&&a-r>=0?a-r:0},()=>{let e=this.state,t=e.limit,r=e.offset;!d&&this.props.getAllOrdersByRole(o.slug,l.slug,n,t,r),d&&this.props.getAllOrdersByRoleByCet(d,o.slug,l.slug,c.role.includes("TEAML")?"TEAML":n,t,r)})},this.handlechangeCurrentStatus=(e,t)=>{let r=window.confirm("Are you sure want to change the status?");if(console.log(r),r){let r=e.target.name,a=e.target.value,s=this.state.currentStatusData;s[r]=a,s.affiliate_id=t.original.affiliate_id,s.order_random_id=t.original.order_random_id,s.editing=t.index,this.setState({currentStatusData:s},()=>a&&this.state.currentStatusData&&this.props.submitCurrentStatus(this.props.userRole,this.state.currentStatusData))}},this.orderStatusFormatter=e=>{let t=this.state,r=t.orderStatusData,a=t.errors,i=e.original,o={affiliate_id:i.affiliate_id,order_id:i.order_random_id,cart_id:i.id},l=14===Number(i.orm_order_status)&&i.order_confirmed_on?Object(h.a)(i.orm_order_status):Object(h.c)(i.orm_order_status),n=Object(f.a)();return this.props.ActiveTab?s.a.createElement("div",null,Object(C.c)(i),Object(C.b)(i),5===i.orm_order_status||6===i.orm_order_status?s.a.createElement("div",{className:"orderstatus"},s.a.createElement("div",null,i.orm_order_status&&Object(h.b)(i.orm_order_status).label),"wakefit"===this.props.activePlatform.slug&&(5===i.orm_order_status||6===i.orm_order_status)&&0!==i.preferred_shipping&&s.a.createElement("div",null,s.a.createElement("span",{className:"bold-text"},"Shipping Partner : "),i.preferred_shipping&&this.shippingPartnerDetail(i.preferred_shipping)),"wakefit"===this.props.activePlatform.slug&&(5===i.orm_order_status||6===i.orm_order_status)&&0!==i.preferred_warehouse&&s.a.createElement("div",null,s.a.createElement("span",{className:"bold-text"},"Warehouse : "),this.wareHouseDetail(i.preferred_warehouse)),(5===i.orm_order_status||6===i.orm_order_status)&&Array.isArray(i.invoice_detail)&&i.invoice_detail.map((e,t)=>s.a.createElement("div",{key:"invoice-oc-".concat(t)},e.docket_number&&s.a.createElement("div",null,s.a.createElement("hr",null),e.docket_number&&s.a.createElement("div",{style:{paddingBottom:"5px"}},s.a.createElement("b",null,"Docket Number:")," ",e.docket_number),e.docket_number&&s.a.createElement("div",{className:"custom-badge",onClick:()=>this.props.getTrackOrderDetails({docket_number:e.docket_number,shipping_id:i.preferred_shipping})},"Track Order"))))):s.a.createElement("div",{className:"status-formatter"},i.estimated_delivery_timestamp&&s.a.createElement("div",{style:{display:"flex",paddingBottom:"7px"}},s.a.createElement("b",null,"EDD : "),s.a.createElement("div",{style:{paddingLeft:"7px"}},Object(p.b)(i.estimated_delivery_timestamp))),0!==i.is_instock&&(2===i.orm_order_status||3===i.orm_order_status)&&s.a.createElement("div",{style:{paddingBottom:"5px",color:"red",fontSize:"11px"}},s.a.createElement("b",null,"Product Under Manufacturing")),s.a.createElement("select",{className:"change-order-dropdown",name:"orm_order_status",value:r.index===e.index&&r.orm_order_status||i.orm_order_status,onChange:t=>this.handleOrderStatusChange(t,e)},l.map((e,t)=>s.a.createElement("option",{key:t,value:e.id},e.label))),(r.index===e.index&&r.orm_order_status&&14===Number(r.orm_order_status)||r.index!==e.index&&14===i.orm_order_status)&&s.a.createElement("div",{className:"hold-reason-dropdown"},s.a.createElement("select",{className:"change-order-dropdown",name:"hold_reason_id",value:r.index===e.index&&r.hold_reason_id||i.hold_reason_id,onChange:t=>this.handleOrderStatusChange(t,e)},s.a.createElement("option",{value:0},"Select Hold Reason"),n.map((e,t)=>s.a.createElement("option",{key:"HoldReason-".concat(t),value:e.id},e.label))),r.index===e.index&&a.hold_reason_id&&s.a.createElement("div",{className:"hold-error"},a.hold_reason_id)),s.a.createElement("textarea",{name:"status_comments",className:"input-field comments",rows:"4",cols:"50",placeholder:"Comments",onChange:t=>this.handleOrderStatusChange(t,e),value:r.index===e.index?r.status_comments:i.status_detail.status_comments||""}),s.a.createElement(u.a,{label:"Update",onClick:t=>this.handleSubmitOrderStatus(t,e),disabled:0===Object.keys(r).length||r.index!==e.index}),s.a.createElement("div",{className:"custom-badge",onClick:()=>this.props.getCommentsByOrder(o)},"Comments"))):""},this.handleSubmitOrderStatus=(e,t)=>{let r=t.original,a=this.props.userDetails,s=this.state,i=s.orderStatusData,o=s.errors;if(i&&14===Number(i.orm_order_status)&&(!i.hold_reason_id||0===Number(i.hold_reason_id)))return o.hold_reason_id="Hold Reason is required!",void this.setState({errors:o});o.hold_reason_id="",window.confirm("Are you sure want to change Order Status?")?this.props.submitOrderStatus({role:a.role.includes("TEAML")?"TEAML":this.props.userRole,orders:[Object(n.a)({order_id:r.order_random_id,cart_id:r.id,affiliate_id:r.affiliate_id,orm_order_status:r.orm_order_status,status_comments:r.status_detail.status_comments||""},this.state.orderStatusData)]}):this.setState({orderStatusData:{},errors:o})},this.handleChangeUrgentDelivery=(e,t)=>{if(window.confirm("Are you sure want to change?")){let r=this.state.urgentDelivery,a=e.target.name,s=e.target.value;r[a]=s,r.index=t.index,r.is_urgent_delivery=e.target.checked?1:0,r.cart_id=t.original.id,r.affiliate_id=t.original.affiliate_id,this.setState({urgentDelivery:r},()=>this.state.urgentDelivery&&this.props.updateUrgentDeliveryStatus(this.props.userRole,this.state.urgentDelivery))}},this.handleOrderStatusChange=(e,t)=>{let r=this.state,a=r.orderStatusData,s=r.errors,i=e.target.name,o=e.target.value;if(a.index===t.index){switch(i){case"hold_reason_id":s.hold_reason_id=0===Number(o)?"Hold Reason is required!":"",a[i]=o;break;default:a[i]=o}"orm_order_status"===i&&14!==Number(t.original.orm_order_status)&&(a.hold_reason_id=0,s.hold_reason_id="")}else a={},a.index=t.index,a.orm_order_status=t.original.orm_order_status,14===Number(t.original.orm_order_status)&&(a.hold_reason_id=t.original.hold_reason_id),a.status_comments=t.original.status_detail.status_comments,a[i]=o;this.setState({orderStatusData:a,index:t.index,errors:s})},this.shippingPartnerDetail=e=>{let t=Object(c.c)(e);return s.a.createElement("div",{style:{display:"inline"}},t&&t.label)},this.wareHouseDetail=e=>{let t=Object(c.d)(e);return s.a.createElement("div",{style:{display:"inline"}},t&&t.label)},this.handleOrderIdChange=e=>{this.setState({searchOrderId:e.target.value})},this.searchByOrderId=e=>{e.preventDefault();let t=this.state.searchOrderId,r=this.props,a=r.activePlatform,s=r.userDetails,i=r.userRole;this.resetTable(),this.props.serachByOrderId(a.slug,t,s.role.includes("TEAML")?"TEAML":i)},this.state={offset:0,limit:A.a,total:0,enableSubmit:!1,bulkOrder:[],urgentDelivery:{},isUpdatingBulk:!1,paymentTrackId:{},orderStatusData:{},currentStatusData:{},searchOrderId:"",editingCartIndex:-1,errors:{orm_order_status:"",hold_reason_id:"",status_comments:"",status_date:""}}}componentWillReceiveProps(e){this.props.activePlatform&&this.props.activePlatform.slug!==e.activePlatform.slug&&this.props.ActiveTab&&this.props.ActiveTab.id!==e.ActiveTab.id||e.refreshOrders?(console.log("Reseting..."),this.resetTable(),!this.props.cetId&&this.props.activePlatform&&this.props.ActiveTab&&this.props.getAllOrdersByRole(e.activePlatform.slug,e.ActiveTab.slug,this.props.userRole,this.state.limit,this.state.offset),this.props.cetId&&this.props.getAllOrdersByRoleByCet(this.props.cetId,e.activePlatform.slug,e.ActiveTab.slug,this.props.userDetails.role.includes("TEAML")?"TEAML":this.props.currentRole,this.state.limit,this.state.offset)):(this.props.activePlatform&&this.props.activePlatform.slug!==e.activePlatform.slug||this.props.ActiveTab&&this.props.ActiveTab.id!==e.ActiveTab.id)&&(this.resetPagination(),this.resetTable()),e.data.results&&this.setState({total:e.data.count})}componentWillUnmount(){this.resetTable()}render(){let e=this.props,t=e.data,r=e.ActiveTab,a=e.activePlatform,i=e.orderIdSearch,o=t.results||[];return s.a.createElement("div",{className:"oc-module-table1"},s.a.createElement("form",{className:"search-box"},s.a.createElement("input",{className:"input-field",placeholder:"Order ID / Phone Number / [A] Phone Number ",onChange:this.handleOrderIdChange}),s.a.createElement(u.a,{label:"Search",type:"submit",disabled:!this.state.searchOrderId,onClick:this.searchByOrderId})),0===o.length?this.props.getNoOrders():s.a.createElement(d.b,{data:o,filterable:!0,minRows:0,pageSize:999,PaginationComponent:()=>s.a.createElement(m.a,{dropDownValues:A.b,onLimitChange:this.onLimitChange,offset:this.state.offset,total:this.state.total,limit:this.state.limit,onPrevClick:this.handleClick,onNextClick:this.handleClick}),NoDataComponent:()=>null,defaultFilterMethod:(e,t)=>String(t[e.id]).toLocaleLowerCase().includes(e.value.toLocaleLowerCase()),columns:[{Header:"S.No",id:"row",width:50,filterable:!1,Cell:e=>s.a.createElement("div",null,e.index+1)},{Header:"Affiliate",width:100,accessor:"affiliate_id",show:a&&"affiliate"===a.slug,Cell:v.b,filterMethod:v.a},{Header:"Order ID",accessor:"order_random_id",minWidth:225,Cell:e=>s.a.createElement(y.a,{rowInfo:e,userRole:this.props.userRole,orderIdSearch:i,activePlatform:this.props.activePlatform,activeTab:this.props.ActiveTab,userDetails:this.props.userDetails,updateCustomer:this.props.updateCustomer}),filterMethod:y.b},{Header:"Cart Details",accessor:"item_name",minWidth:230,Cell:e=>s.a.createElement(b.b,{rowInfo:e,allOrders:o,userDetails:this.props.userDetails,getMoreModifiedHistoryByOrder:this.props.getMoreModifiedHistoryByOrder}),filterMethod:b.a},{Header:"User Details",accessor:"customer_details",minWidth:240,Cell:e=>s.a.createElement(_.b,{rowInfo:e,userDetails:this.props.userDetails,clickToCall:this.props.clickToCall,showPopup:this.props.showPopup,updateCustomer:this.props.updateCustomer}),filterMethod:_.a},{Header:"Customer Comments",accessor:"additional_comments",width:230,Cell:O.a},{Header:"Order Status",accessor:"orm_order_status",minWidth:235,Cell:r&&a&&this.orderStatusFormatter},{Header:"Create Time Stamp",accessor:"create_timestamp",minWidth:175,Cell:g.a,filterMethod:g.b},{Header:"Last Update Time",accessor:"update_timestamp",minWidth:175,Cell:g.a,filterMethod:g.b}]}))}}var E=S,k=r(137),T=r(355),D=r(343),w=r(30),P=r(85);class N extends s.a.Component{constructor(e){super(e),this.changePlatform=e=>{this.setState({activePlatform:e},()=>this.changeTab(this.state.tabs[0]))},this.changeTab=e=>{let t=this.props,r=t.platform,a=t.slug,s=t.cetId,i=t.userDetails,o=this.state.activePlatform;o.slug===r&&e.slug===a||(s?this.props.history.push("/order-confirmation-team/".concat(s,"/").concat(o.slug,"/").concat(e.slug)):this.props.history.push("/order-confirmation-team/".concat(o.slug,"/").concat(e.slug))),this.setState({activeTab:e},()=>{this.props.resetOrders(),!s&&this.props.getAllOrdersByRole(this.state.activePlatform.slug,e.slug,"OC",A.a,0),s&&this.props.getAllOrdersByRoleByCet(s,this.state.activePlatform.slug,e.slug,i.role.includes("TEAML")?"TEAML":"OC",A.a,0)})},this.getPlatformTabs=()=>s.a.createElement("div",{className:"platform-tabs"},this.state.platforms.map((e,t)=>s.a.createElement("div",{key:t,className:this.state.activePlatform&&this.state.activePlatform.slug===e.slug?"tab-invert pointer active":"tab-invert pointer",onClick:()=>this.changePlatform(e)},e.label,this.props.orders.count&&this.props.orderIdSearch&&this.state.activePlatform&&this.state.activePlatform.slug===e.slug&&s.a.createElement(l.a,{className:"custom-badge search-badge",color:"secondary",badgeContent:this.props.orders.count})))),this.getTabs=()=>s.a.createElement("div",{className:"menu-container"},this.state.tabs.map((e,t)=>s.a.createElement("div",{key:t,className:this.state.activeTab&&this.state.activeTab.slug===e.slug?"tab pointer active":"tab pointer",onClick:()=>this.changeTab(e)},e.label))),this.getNoOrders=()=>s.a.createElement("div",{className:"no-orders"},"There is No Orders, Please Try After Some Time..."),this.state={platforms:[],tabs:[]}}componentDidMount(){let e=this.props,t=e.platform,r=e.slug,a=e.cetId,s=Object(D.a)("OC"),i=Object(h.d)("OC"),o=s.filter(e=>e.slug===t),l=i.filter(e=>e.slug===r);if(a&&(0===o.length||0===l.length)){let e=o.length>0?o[0].slug:s.length>0?s[0].slug:"",t=l.length>0?l[0].slug:i.length>0?i[0].slug:"";this.props.history.push("/order-confirmation-team/".concat(a,"/").concat(e,"/").concat(t))}this.setState({platforms:s,tabs:i,activePlatform:o[0]||s[0],activeTab:l[0]||i[0]},()=>this.changeTab(this.state.activeTab))}componentWillReceiveProps(e){e.refreshOrders&&console.log("Reload orders...")}componentWillUnmount(){this.props.resetOrders()}render(){let e=this.state,t=e.activePlatform,r=e.activeTab,a=this.props,i=a.orders,o=a.orderIdSearch,l="Order ".concat(o?"Id Search":"List  ".concat(r&&"- ".concat(r.label)));return s.a.createElement("div",{className:"ocmodule-container"},s.a.createElement(P.a,{header:l,count:i&&i.count}),this.getPlatformTabs(),!o&&this.getTabs(),i?s.a.createElement(E,{userRole:"OC",cetId:this.props.cetId,orderIdSearch:o,getAllOrdersByRole:this.props.getAllOrdersByRole,getAllOrdersByRoleByCet:this.props.getAllOrdersByRoleByCet,activePlatform:t,ActiveTab:r,data:i,userDetails:this.props.userDetails,clickToCall:this.props.clickToCallAction,getCommentsByOrder:this.props.getCommentsByOrder,getTrackOrderDetails:this.props.TrackOrderDetails,updateCustomer:this.props.submitPaymentTrackId,submitCurrentStatus:this.props.submitCurrentStatus,updateUrgentDeliveryStatus:this.props.UrgentDeliveryStatus,submitOrderStatus:this.props.submitOrderStatus,serachByOrderId:this.props.serachByOrderId,getMoreModifiedHistoryByOrder:this.props.getMoreModifiedHistoryByOrder,showPopup:this.props.showPopup,refreshOrders:this.props.refreshOrders,getNoOrders:this.getNoOrders}):this.getNoOrders())}}t.default=Object(i.b)((e,t)=>({userDetails:e.userDetails,refreshOrders:e.general.refreshOrders,orders:e.general.ordersData,orderIdSearch:e.general.orderIdSearch}),e=>Object(o.b)({getAllOrdersByRole:k.g,getAllOrdersByRoleByCet:k.h,resetOrders:k.n,clickToCallAction:k.f,getMoreModifiedHistoryByOrder:T.b,submitPaymentTrackId:k.s,submitCurrentStatus:T.c,submitOrderStatus:k.r,getCommentsByOrder:k.i,UrgentDeliveryStatus:T.a,serachByOrderId:k.q,TrackOrderDetails:k.a,showPopup:w.b},e))(N)}}]);
//# sourceMappingURL=12.7c9c710a.chunk.js.map