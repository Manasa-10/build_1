{"version":3,"sources":["utilities/fileHandler.js","containers/ImportSheets/components/UploadAffiliateSheet/index.js","containers/ImportSheets/action.js","containers/ImportSheets/components/Table/index.js","containers/ImportSheets/index.js"],"names":["convertBase64","file","callback","base64Converted","reader","FileReader","readAsDataURL","onloadend","fileData","result","split","length","FileListItem","a","c","b","slice","call","Array","isArray","arguments","d","File","TypeError","ClipboardEvent","clipboardData","DataTransfer","items","add","files","UploadAffiliateSheet","Component","state","data","affiliate_id","enableSubmit","fileInput","React","createRef","resetForm","this","setState","current","validateForm","validForm","every","field","uploadAffiliateSheet","props","handleChange","event","fieldName","target","name","fieldValue","value","image","componentWillReceiveProps","resetAffiliate","render","className","id","type","onChange","checked","htmlFor","ref","accept","encType","Button","label","onClick","disabled","uploadAffiliateSheetAction","dispatch","showLoader","then","response","hideLoader","UPLOAD_AFFILIATE_SHEET_SUCCESS","uploadSuccess","message","resetAffiliateData","catch","error","handleError","RESET_AFFILIATE_SHEET_DETAILS","resetAffiliateUloadComponent","RESET_AFFILIATE_COMPOENENT_DETAILS","Table","tabs","key","activeTab","success_count","map","tab","index","row","ImportSheets","componentWillUnmount","PageHeader","header","successData","connect","ownProps","importAffiliateOrders","bindActionCreators"],"mappings":"qGAAA,oEAAO,MAAMA,EAAgB,CAACC,EAAMC,KAEhC,IAAKD,EAAM,OACX,IAAIE,EACAC,EAAS,IAAIC,WACjBD,EAAOE,cAAcL,GACrBG,EAAOG,UAAY,KACf,IAAIC,EAAWJ,EAAOK,OAAOC,MAAM,KACnCP,EAAkBK,EAASG,OAAS,EAAIH,EAAS,GAAKJ,EAAOK,OAE7DP,EAASC,KAQV,SAASS,EAAaC,GAGzB,IAAK,IAAIC,EAAGC,EAAID,GADhBD,EAAI,GAAGG,MAAMC,KAAKC,MAAMC,QAAQN,GAAKA,EAAIO,YACnBT,OAAQU,GAAI,EAAIN,KAAOM,GAAIA,EAAIR,EAAEE,aAAcO,KACrE,IAAKD,EAAG,MAAM,IAAIE,UAAU,kEAC5B,IAAKR,EAAK,IAAIS,eAAe,IAAKC,eAAiB,IAAIC,aAAgBZ,KAAMC,EAAEY,MAAMC,IAAIf,EAAEC,IAC3F,OAAOC,EAAEc,Q,yLCnBb,MAAMC,UAA6BC,YAAW,eAAD,oBAEzCC,MAAQ,CACJC,KAAM,CACFC,aAAc,GACd,YAAe,IAEnBC,cAAc,GAPuB,KAUzCC,UAAYC,IAAMC,YAVuB,KAkBzCC,UAAY,KACRC,KAAKC,SAAS,CACVR,KAAM,CACF,aAAgB,GAChB,YAAe,IAEnBE,cAAc,IAElBK,KAAKJ,UAAUM,QAAQb,MAAQjB,YAAa,KA1BP,KA6BzC+B,aAAe,KAAO,IACZV,EAASO,KAAKR,MAAdC,KACFW,GAAY,EAEhBA,EADqB,CAAC,eAAgB,eACXC,MAAMC,GAAyB,KAAhBb,EAAKa,IAC/CN,KAAKC,SAAS,CAAEN,aAAcS,KAlCO,KAqCzCG,qBAAuB,KACnBP,KAAKQ,MAAMD,qBAAqBP,KAAKR,MAAMC,OAtCN,KAyCzCgB,aAAgBC,IAAW,IACjBjB,EAASO,KAAKR,MAAdC,KACFkB,EAAYD,EAAME,OAAOC,KACzBC,EAAaJ,EAAME,OAAOG,MAC9B,OAAQJ,GACJ,IAAK,cAGD,GAFgBD,EAAME,OAAhBvB,MAEIlB,OAAS,EAAG,CAElB,IAAI6C,EAAQhB,KAAKJ,UAAUM,QAAQb,MAAM,GACzC7B,YAAcwD,EAAQ/C,IAClBwB,EAAI,YAAkBxB,EACtB+B,KAAKC,SAAS,CAAER,QAAQ,KACpBO,KAAKG,mBAKjBV,EAAKkB,GAAaG,EAClB,MACJ,QAASrB,EAAKkB,GAAaG,EAG/Bd,KAAKC,SAAS,CAAER,QAAQ,IAAMO,KAAKG,iBArDvCc,0BAA0BT,GAClBA,EAAMU,gBACNlB,KAAKD,YAsDboB,SAAU,IACA1B,EAASO,KAAKR,MAAdC,KACN,OACI,0BAAM2B,UAAU,0BACZ,yBAAKA,UAAU,mBACX,uBAAGA,UAAU,eAAb,eACA,yBAAKA,UAAU,kBACX,yBAAKA,UAAU,mBACX,2BAAOC,GAAG,iBAAiBR,KAAK,eAAeS,KAAK,QAAQC,SAAUvB,KAAKS,aAAce,QAA+B,MAAtB/B,EAAKC,aAAsBqB,MAAO,IACpI,2BAAOU,QAAQ,kBAAf,WAGJ,yBAAKL,UAAU,mBACX,2BAAOC,GAAG,iBAAiBR,KAAK,eAAeS,KAAK,QAAQC,SAAUvB,KAAKS,aAAce,QAA+B,MAAtB/B,EAAKC,aAAsBqB,MAAO,IACpI,2BAAOU,QAAQ,kBAAf,cAGJ,yBAAKL,UAAU,mBACX,2BAAOC,GAAG,iBAAiBR,KAAK,eAAeS,KAAK,QAAQC,SAAUvB,KAAKS,aAAce,QAA+B,MAAtB/B,EAAKC,aAAsBqB,MAAO,IACpI,2BAAOU,QAAQ,kBAAf,eAKZ,yBAAKL,UAAU,mBACX,uBAAGA,UAAU,eAAb,UACA,yBAAKA,UAAU,0BACX,2BACIP,KAAK,cACLO,UAAU,aACVE,KAAK,OACLC,SAAUvB,KAAKS,aAGfiB,IAAK1B,KAAKJ,UACV+B,OAAO,oBACPC,QAAQ,0BAKpB,yBAAKR,UAAU,mBACX,kBAACS,EAAA,EAAD,CACIC,MAAO,SACPC,QAAS/B,KAAKO,qBACdyB,UAAWhC,KAAKR,MAAMG,kBAQ/BL,Q,+BCzHR,SAAS2C,EAA2BxC,GACvC,OAAQyC,IACJA,EAASC,eACT5B,aAAqBd,GAChB2C,KAAKC,IACFH,EAASI,eACTJ,EAST,SAAuBzC,GAC1B,MAAO,CACH6B,KAAMiB,IACN9C,QAZiB+C,CAAcH,EAAS5C,KAAKgD,UACrCP,EAASQ,OAEZC,MAAMC,IACHC,YAAYD,EAAOV,MAY5B,SAASQ,IACZ,MAAO,CACHpB,KAAMwB,KAIP,SAASC,IACZ,MAAO,CACHzB,KAAM0B,K,OChCd,MAAMC,UAAcpD,IAAMN,UAAW,eAAD,oBAEhCC,MAAQ,CACJ0D,KAAM,CAAC,CACHpB,MAAO,WACPqB,IAAK,qBACN,CACCrB,MAAO,SACPqB,IAAK,oBAETC,UAAW,qBAViB,KAahC3C,aAAgB0C,IACZnD,KAAKC,SAAS,CAAEmD,UAAWD,KAG/BhC,SAAU,IAAD,EACqBnB,KAAKR,MAAzB0D,EADD,EACCA,KAAME,EADP,EACOA,UACN3D,EAASO,KAAKQ,MAAdf,KACN,OACI,yBAAK2B,UAAU,uBACX,yBAAKA,UAAU,mBAAkB,2BAAI3B,EAAK4D,eAA1C,kBACA,yBAAKjC,UAAU,SAAf,0BACA,yBAAKA,UAAU,kBAAkB8B,EAAKI,IAAI,CAACC,EAAKC,IAC5C,yBAAKL,IAAG,cAASK,GAASpC,UAAWmC,EAAIJ,MAAQC,EAAY,oBAAsB,aAAcrB,QAAS,IAAM/B,KAAKS,aAAa8C,EAAIJ,MAAOI,EAAIzB,SAErJ,2BAAOV,UAAU,SACb,4BACI,wBAAIA,UAAU,QAAd,QACA,wBAAIA,UAAU,WAAd,YAEH3B,EAAK2D,GAAWE,IAAI,CAACG,EAAKD,IAChB,wBAAIL,IAAG,oBAAeK,IACzB,wBAAIpC,UAAU,QAAQoC,EAAQ,GAC9B,wBAAIpC,UAAU,WAAWqC,QAStCR,QCtCf,MAAMS,UAAqBnE,YAEvBoE,uBACI3D,KAAKQ,MAAMuC,+BAGf5B,SACI,OACI,yBAAKC,UAAU,8BACX,kBAACwC,EAAA,EAAD,CACIC,OAAQ,qBAEZ,yBAAKzC,UAAU,4BACX,kBAAC,EAAD,CACIF,eAAgBlB,KAAKQ,MAAMU,eAC3BX,qBAAsBP,KAAKQ,MAAMyB,2BACjCS,mBAAoB1C,KAAKQ,MAAMkC,qBAElC1C,KAAKQ,MAAMsD,aACR,kBAAC,EAAD,CACIrE,KAAMO,KAAKQ,MAAMsD,iBAoB9BC,sBAXS,CAACvE,EAAOwE,KACrB,CACHF,YAAatE,EAAMyE,sBAAsBH,YACzC5C,eAAgB1B,EAAMyE,sBAAsB/C,iBAIxBgB,GACjBgC,YAAmB,CAAEjC,6BAA4BS,qBAAoBK,gCAAgCb,GAGjG6B,CAA6CL","file":"static/js/24.55c7f660.chunk.js","sourcesContent":["export const convertBase64 = (file, callback) => {\r\n    //  Return Base64 in callback\r\n    if (!file) return;\r\n    let base64Converted;\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onloadend = () => {\r\n        let fileData = reader.result.split(\",\");    //  Spilting and removing header part(that contains file type etc)\r\n        base64Converted = fileData.length > 0 ? fileData[1] : reader.result;\r\n\r\n        callback(base64Converted);\r\n    }\r\n    //  using of call back\r\n    //  (result) => {\r\n    //      console.log(result);\r\n    //  }\r\n}\r\n\r\nexport function FileListItem(a) {\r\n    //  For Reseting the event.target.files after API success.\r\n    a = [].slice.call(Array.isArray(a) ? a : arguments)\r\n    for (var c, b = c = a.length, d = !0; b-- && d;) d = a[b] instanceof File\r\n    if (!d) throw new TypeError(\"expected argument to FileList is File or array of File objects\")\r\n    for (b = (new ClipboardEvent(\"\")).clipboardData || new DataTransfer(); c--;) b.items.add(a[c])\r\n    return b.files\r\n\r\n\r\n    //  Do the following\r\n    //  this.fileInput = React.createRef();     ------->        Add it in Constructor\r\n    //  this.fileInput.current.files = FileListItem([]);    ->  Add it in reset() Method\r\n    //  ref={this.fileInput}                    ------->        Add it in Input Tag\r\n}\r\n\r\nexport const convetBase64ToImage = (base64String) => {\r\n    return \"data:image/jpeg;base64,\" + base64String;\r\n}\r\n","import React, { Component } from 'react';\r\nimport './style.scss';\r\nimport Button from '../../../../components/Button';\r\nimport { convertBase64, FileListItem } from '../../../../utilities/fileHandler';\r\n\r\nclass UploadAffiliateSheet extends Component {\r\n\r\n    state = {\r\n        data: {\r\n            affiliate_id: \"\",\r\n            \"attachments\": \"\"\r\n        },\r\n        enableSubmit: false\r\n    }\r\n\r\n    fileInput = React.createRef();\r\n\r\n    componentWillReceiveProps(props) {\r\n        if (props.resetAffiliate) {\r\n            this.resetForm();\r\n        }\r\n    }\r\n\r\n    resetForm = () => {\r\n        this.setState({\r\n            data: {\r\n                \"affiliate_id\": \"\",\r\n                \"attachments\": \"\"\r\n            },\r\n            enableSubmit: false\r\n        });\r\n        this.fileInput.current.files = FileListItem([]);\r\n    }\r\n\r\n    validateForm = () => {\r\n        let { data } = this.state;\r\n        let validForm = false;\r\n        let requiredFields = [\"affiliate_id\", \"attachments\"];\r\n        validForm = requiredFields.every(field => data[field] !== \"\");\r\n        this.setState({ enableSubmit: validForm });\r\n    }\r\n\r\n    uploadAffiliateSheet = () => {\r\n        this.props.uploadAffiliateSheet(this.state.data);\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        let { data } = this.state;\r\n        let fieldName = event.target.name;\r\n        let fieldValue = event.target.value;\r\n        switch (fieldName) {\r\n            case \"attachments\":\r\n                let { files } = event.target;\r\n                // let allowedImageSize = 5 * 1024 * 1024; // 5MB Image size\r\n                if (files.length > 0) {\r\n                    // if (files[0].size <= allowedImageSize) {\r\n                    let image = this.fileInput.current.files[0]\r\n                    convertBase64(image, (result) => {\r\n                        data[\"attachments\"] = result;\r\n                        this.setState({ data }, () => {\r\n                            this.validateForm();\r\n                        });\r\n                    });\r\n                    // }\r\n                }\r\n                data[fieldName] = fieldValue;\r\n                break;\r\n            default: data[fieldName] = fieldValue;\r\n                break;\r\n        }\r\n        this.setState({ data }, () => this.validateForm());\r\n    }\r\n\r\n    render() {\r\n        let { data } = this.state;\r\n        return (\r\n            <form className=\"upload-affiliate-sheet\">\r\n                <div className=\"input-container\">\r\n                    <b className=\"input-label\">Import Type</b>\r\n                    <div className=\"flex-container\">\r\n                        <div className=\"field-container\">\r\n                            <input id=\"affiliate_id-1\" name=\"affiliate_id\" type=\"radio\" onChange={this.handleChange} checked={data.affiliate_id === \"1\"} value={1} />\r\n                            <label htmlFor=\"affiliate_id-1\">Amazon</label>\r\n                        </div>\r\n\r\n                        <div className=\"field-container\">\r\n                            <input id=\"affiliate_id-2\" name=\"affiliate_id\" type=\"radio\" onChange={this.handleChange} checked={data.affiliate_id === \"2\"} value={2} />\r\n                            <label htmlFor=\"affiliate_id-2\">Pepperfry</label>\r\n                        </div>\r\n\r\n                        <div className=\"field-container\">\r\n                            <input id=\"affiliate_id-3\" name=\"affiliate_id\" type=\"radio\" onChange={this.handleChange} checked={data.affiliate_id === \"3\"} value={3} />\r\n                            <label htmlFor=\"affiliate_id-3\">Flipkart</label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"input-container\">\r\n                    <b className=\"input-label\">Upload</b>\r\n                    <div className=\"field-container upload\">\r\n                        <input\r\n                            name=\"attachments\"\r\n                            className=\"attachment\"\r\n                            type=\"file\"\r\n                            onChange={this.handleChange}\r\n                            // multiple={true}\r\n                            // value={data.attachments}\r\n                            ref={this.fileInput}\r\n                            accept=\".xlsx, .xls, .csv\"\r\n                            encType=\"multipart/form-data\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"field-container\">\r\n                    <Button\r\n                        label={\"Upload\"}\r\n                        onClick={this.uploadAffiliateSheet}\r\n                        disabled={!this.state.enableSubmit}\r\n                    />\r\n                </div>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default UploadAffiliateSheet;\r\n","import { UPLOAD_AFFILIATE_SHEET_SUCCESS, RESET_AFFILIATE_SHEET_DETAILS, RESET_AFFILIATE_COMPOENENT_DETAILS } from \"./constants\";\r\nimport { showLoader, hideLoader } from \"../../components/Loader/action\";\r\nimport handleError from \"../../errorHandler\";\r\nimport { uploadAffiliateSheet } from \"../../api\";\r\n\r\nexport function uploadAffiliateSheetAction(data) {\r\n    return (dispatch) => {\r\n        dispatch(showLoader());\r\n        uploadAffiliateSheet(data)\r\n            .then(response => {\r\n                dispatch(hideLoader());\r\n                dispatch(uploadSuccess(response.data.message));\r\n                dispatch(resetAffiliateData());\r\n            })\r\n            .catch(error => {\r\n                handleError(error, dispatch);\r\n            });\r\n    }\r\n}\r\n\r\nexport function uploadSuccess(data) {\r\n    return {\r\n        type: UPLOAD_AFFILIATE_SHEET_SUCCESS,\r\n        data\r\n    }\r\n}\r\n\r\nexport function resetAffiliateData() {\r\n    return {\r\n        type: RESET_AFFILIATE_SHEET_DETAILS\r\n    }\r\n}\r\n\r\nexport function resetAffiliateUloadComponent() {\r\n    return {\r\n        type: RESET_AFFILIATE_COMPOENENT_DETAILS\r\n    }\r\n}\r\n","import React from 'react';\r\nimport './style.scss';\r\n\r\nclass Table extends React.Component {\r\n\r\n    state = {\r\n        tabs: [{\r\n            label: \"Existing\",\r\n            key: \"existing_cart_ids\"\r\n        }, {\r\n            label: \"Failed\",\r\n            key: \"failed_cart_ids\"\r\n        }],\r\n        activeTab: \"existing_cart_ids\"\r\n    }\r\n\r\n    handleChange = (key) => {\r\n        this.setState({ activeTab: key });\r\n    }\r\n\r\n    render() {\r\n        let { tabs, activeTab } = this.state;\r\n        let { data } = this.props;\r\n        return (\r\n            <div className=\"import-orders-table\">\r\n                <div className=\"success-message\"><b>{data.success_count}</b> got Imported!</div>\r\n                <div className=\"title\">Existing/Failed Orders</div>\r\n                <div className=\"tabs-container\">{tabs.map((tab, index) =>\r\n                    <div key={`tab-${index}`} className={tab.key === activeTab ? \"import-tab active\" : \"import-tab\"} onClick={() => this.handleChange(tab.key)}>{tab.label}</div>)}\r\n                </div>\r\n                <table className=\"table\">\r\n                    <tr>\r\n                        <th className=\"slno\">S.No</th>\r\n                        <th className=\"cart-id\">Cart Id</th>\r\n                    </tr>\r\n                    {data[activeTab].map((row, index) => {\r\n                        return <tr key={`error-row-${index}`}>\r\n                            <td className=\"slno\">{index + 1}</td>\r\n                            <td className=\"cart-id\">{row}</td>\r\n                        </tr>\r\n                    })}\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Table;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport './style.scss';\r\nimport PageHeader from '../../components/PageHeader';\r\nimport UploadAffiliateSheet from './components/UploadAffiliateSheet';\r\nimport { uploadAffiliateSheetAction, resetAffiliateData, resetAffiliateUloadComponent } from './action';\r\nimport Table from './components/Table';\r\n\r\nclass ImportSheets extends Component {\r\n\r\n    componentWillUnmount() {\r\n        this.props.resetAffiliateUloadComponent();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"import-affiliate-container\">\r\n                <PageHeader\r\n                    header={\"Affiliate Orders\"}\r\n                />\r\n                <div className=\"import-affiliate-content\">\r\n                    <UploadAffiliateSheet\r\n                        resetAffiliate={this.props.resetAffiliate}\r\n                        uploadAffiliateSheet={this.props.uploadAffiliateSheetAction}\r\n                        resetAffiliateData={this.props.resetAffiliateData}\r\n                    />\r\n                    {this.props.successData &&\r\n                        <Table\r\n                            data={this.props.successData}\r\n                        />\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        successData: state.importAffiliateOrders.successData,\r\n        resetAffiliate: state.importAffiliateOrders.resetAffiliate\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return bindActionCreators({ uploadAffiliateSheetAction, resetAffiliateData, resetAffiliateUloadComponent }, dispatch)\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImportSheets);\r\n"],"sourceRoot":""}