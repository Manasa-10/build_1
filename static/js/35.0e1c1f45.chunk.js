(this.webpackJsonpwakefit=this.webpackJsonpwakefit||[]).push([[35],{323:function(e,o,t){"use strict";var n=t(0),a=t.n(n),c=t(659),s=t(611),u=t(299),i=t(303),p=t(142),r=t.n(p);class l extends n.Component{constructor(...e){super(...e),this.state={toggle:!1},this.handleCollapse=e=>this.setState({toggle:e},()=>this.props.callbackOnClose&&this.props.callbackOnClose())}componentDidMount(){let e=this.props.toggle;this.setState({toggle:e})}render(){let e=this.props,o=e.message,t=e.title,n=e.type,p=this.state.toggle;return a.a.createElement(i.a,{in:p,style:{width:"100%"}},a.a.createElement(c.a,{severity:n,action:a.a.createElement(u.a,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>this.handleCollapse(!1)},a.a.createElement(r.a,{fontSize:"inherit"}))},t&&a.a.createElement(s.a,null,t),o))}}l.defaultProps={message:"",title:"",toggle:!0,type:"info"},o.a=l},409:function(e,o,t){"use strict";t.d(o,"b",(function(){return i})),t.d(o,"a",(function(){return p})),t.d(o,"g",(function(){return r})),t.d(o,"c",(function(){return l})),t.d(o,"f",(function(){return _})),t.d(o,"e",(function(){return m})),t.d(o,"d",(function(){return h}));var n=t(57),a=t(4),c=t(13),s=t(11),u=t(18);function i(){return e=>{Object(s.E)().then(o=>{var t;e((t=o.data,{type:n.b,data:t}))}).catch(o=>{Object(c.a)(o,e)})}}function p(e){return o=>{o(Object(a.b)()),Object(s.h)(e).then(e=>{o(Object(a.a)()),o(_(!0)),o(function(e){return{type:n.a,data:e}}(e.data))}).catch(e=>{Object(c.a)(e,o)})}}function r(e){return o=>{o(Object(a.b)()),Object(s.l)(e).then(t=>{o(Object(a.a)()),o(_(!0)),o(d(e)),t.data&&t.data.message&&u.b.success(t.data.message)}).catch(e=>{Object(c.a)(e,o)})}}function l(e){return o=>{o(Object(a.b)()),Object(s.B)(e).then(e=>{o(Object(a.a)()),o(d(e.data))}).catch(e=>{Object(c.a)(e,o)})}}function d(e){return{type:n.c,data:e}}function _(e){return{type:n.f,data:e}}function m(){return{type:n.d}}function h(){return{type:n.e}}},650:function(e,o,t){},676:function(e,o,t){"use strict";t.r(o);var n=t(9),a=t(0),c=t.n(a),s=(t(650),t(21)),u=t(16),i=t(85),p=t(295),r=t(305),l=t(706),d=t(306),_=t(298),m=t(297),h=t(342),g=t(409),f=t(29),C=t(32),b=t(323);const E=[{id:1,label:"Percentage",value:1},{id:2,label:"Flat Discount",value:2}];class y extends a.Component{constructor(...e){super(...e),this.state={fields:{coupon_type:1,coupon_classification:"",coupon_code:"",coupon_percentage:"",coupon_accessories_percentage:"",coupon_cot_percentage:"",coupon_flat_discount:"",coupon_max_discount:"",coupon_min_amount:"",start_date:"",end_date:"",coupon_description:""},errors:{coupon_type:"",coupon_classification:"",coupon_code:"",coupon_percentage:"",coupon_accessories_percentage:"",coupon_cot_percentage:"",coupon_flat_discount:"",coupon_max_discount:"",coupon_min_amount:"",start_date:"",end_date:"",coupon_description:""},valid:!1,gettingExistingCouponData:!1},this.resetComponent=()=>{this.setState({fields:Object(n.a)({coupon_type:"",coupon_classification:"",coupon_code:"",coupon_percentage:"",coupon_accessories_percentage:"",coupon_cot_percentage:"",coupon_flat_discount:"",coupon_max_discount:"",coupon_min_amount:"",start_date:"",end_date:"",coupon_description:""},this.props.couponData),errors:{coupon_type:"",coupon_classification:"",coupon_code:"",coupon_percentage:"",coupon_accessories_percentage:"",coupon_cot_percentage:"",coupon_flat_discount:"",coupon_max_discount:"",coupon_min_amount:"",start_date:"",end_date:"",coupon_description:""},valid:!1})},this.handleChange=e=>{let o=e.target.name,t=e.target.value,n=this.state,a=n.fields,c=n.errors;switch(o){case"coupon_type":t?(a[o]=t,c[o]=""):(a[o]="",c[o]="Coupon Type is Required!"),a.coupon_classification=c.coupon_classification="",a.coupon_code=c.coupon_code="",a.coupon_percentage=c.coupon_percentage="",a.coupon_flat_discount=c.coupon_flat_discount="",a.coupon_max_discount=c.coupon_max_discount="",a.coupon_min_amount=c.coupon_min_amount="",a.start_date=c.start_date="",a.end_date=c.end_date="",a.coupon_description=c.coupon_description="";break;case"coupon_code":t?(a[o]=t,c[o]=""):(a[o]="",c[o]="Coupon Code is Required!");break;case"coupon_percentage":case"coupon_flat_discount":case"coupon_max_discount":case"coupon_min_amount":case"coupon_accessories_percentage":case"coupon_cot_percentage":let e=["coupon_accessories_percentage","coupon_cot_percentage","coupon_max_discount","coupon_min_amount"],n=["coupon_max_discount","coupon_min_amount"],s="coupon_percentage"===o?"Coupon Percentage":"coupon_max_discount"===o?"Max Discount for Coupon":"coupon_min_amount"===o?"Min Cart Amount for Coupon":"coupon_flat_discount"===o?"Coupon Flat Discount":"coupon_accessories_percentage"===o?"Coupon Accessory Percentage":"coupon_cot_percentage"===o?"Coupon Cot Percentage":"";if(f.b.test(t)){let u=String(t).split(".");1===Number(a.coupon_type)&&!n.includes(o)&&u.length>0&&u[0].length<=3?(a[o]=t,c[o]=0===Number(t)&&e.includes(o)||t>100?"Invalid ".concat(s):""):(2===Number(a.coupon_type)||n.includes(o))&&u.length>0&&u[0].length<=6&&(a[o]=t,c[o]=0===Number(t)&&e.includes(o)?"Invalid ".concat(s):"")}else 0===t.length&&(a[o]="",c[o]="".concat(s," is Required!"));break;default:a[o]=t,c[o]=""}this.setState({fields:a,errors:c},()=>console.log(this.state))},this.checkValidity=e=>{e.preventDefault();let o=this.state,t=o.fields,n=o.errors,a=!1,c=!1,s={coupon_type:"Coupon Type",coupon_code:"Coupon Name/ Code",coupon_max_discount:"Max Discount for Coupon",coupon_min_amount:"Min Cart Amount for Coupon",start_date:"Start Date",end_date:"End Date"};1===Number(t.coupon_type)?(t.coupon_percentage||(s.coupon_percentage="Coupon Percentage"),t.coupon_accessories_percentage||(s.coupon_accessories_percentage="Coupon Accessory Percentage"),t.coupon_cot_percentage||(s.coupon_cot_percentage="Coupon Cot Percentage")):2===Number(t.coupon_type)&&(t.coupon_flat_discount||(s.coupon_flat_discount="Coupon Flat Discount")),Object.keys(s).map((e,o)=>(t[e]||(n[e]="".concat(s[e]," is Required!")),"")),c=Object.keys(s).every(e=>t[e]&&""!==t[e]),a=Object.keys(n).some(e=>n[e]&&""!==n[e]),this.setState({fields:t,errors:n,valid:c&&!a},()=>{console.log(this.state),this.state.valid&&this.handleSubmit()})},this.handleSubmit=()=>{let e=this.state.fields,o=this.props.userDetails;this.props.couponId&&this.props.updateCouponAction?(e.updated_by=o?o.login_id:0,this.props.updateCouponAction(Object(n.a)({},e))):this.props.createCouponAction&&(e.created_by=o?o.login_id:0,this.props.createCouponAction(e))}}componentDidMount(){let e=this.props.couponId;this.props.getCategoriesAction(),e&&this.setState({gettingExistingCouponData:!0},()=>{let o={coupon_id:e};this.props.getCouponByIdAction(o)})}componentWillReceiveProps(e){let o=this.state,t=o.gettingExistingCouponData,n=o.fields,a=e.couponData,c=e.couponId,s=e.reloadComponentWithFreshData;e.refreshData&&(console.log("Refreshing...",e),c&&this.setState({gettingExistingCouponData:!0},()=>{let e={coupon_id:c};this.props.getCouponByIdAction(e)}),this.resetComponent(),this.props.toggleCouponDataRefresh(!1)),(t||s)&&a&&(console.log("Executing..."),n.coupon_type=a.coupon_type,n.coupon_classification=a.coupon_classification_id,n.coupon_code=a.coupon_code,n.coupon_percentage=String(a.coupon_percentage),n.coupon_accessories_percentage=String(a.coupon_accessories_percentage),n.coupon_cot_percentage=String(a.coupon_cot_percentage),n.coupon_flat_discount=String(a.coupon_flat_discount),n.coupon_max_discount=String(a.coupon_max_discount),n.coupon_min_amount=String(a.coupon_min_amount),n.start_date=a.start_date,n.end_date=a.end_date,n.coupon_description=a.coupon_description,this.setState({fields:n,gettingExistingCouponData:!1},()=>{this.props.resetAfterTheDataLoaded(),console.log(e,this.state)}))}componentWillUnmount(){this.props.resetCouponComponentAction()}render(){let e=this.props,o=e.couponId,t=e.couponData,n="".concat(o?"Update":"Create"," Coupon ").concat(t&&t.coupon_uid?"- ".concat(t.coupon_uid):""),a=this.state,s=a.fields,u=a.errors,g=this.props,f=g.categories,y=g.successData;return console.log("Rendering...",this.props),c.a.createElement("div",{className:"coupon-container"},c.a.createElement(i.a,{header:n}),c.a.createElement("div",{className:"coupon-content"},y&&y.data&&y.data.coupon_uid&&c.a.createElement(b.a,{message:"Coupon Created successfully with Coupon Id: ".concat(y.data.coupon_uid)}),c.a.createElement("form",{className:"coupon-form"},c.a.createElement("div",{className:"coupon-dropdown-container"},c.a.createElement(p.a,{className:"select-container coupon-discout-field",error:u.coupon_type},c.a.createElement(r.a,{id:"coupon-type-label"},"Coupon Type"),c.a.createElement(l.a,{labelId:"coupon-type-label",id:"coupon_type",name:"coupon_type",value:s.coupon_type,onChange:this.handleChange},c.a.createElement(d.a,{value:""},"Select"),E.map((e,o)=>c.a.createElement(d.a,{value:e.value},e.label))),c.a.createElement(_.a,{id:"coupon_type"},u.coupon_type)),c.a.createElement(p.a,{className:"select-container coupon-discout-field",error:u.coupon_classification},c.a.createElement(r.a,{id:"coupon-classification-label"},"Coupon Classification"),c.a.createElement(l.a,{labelId:"coupon-classification-label",id:"coupon_classification",name:"coupon_classification",value:s.coupon_classification,onChange:this.handleChange},c.a.createElement(d.a,{value:""},"Select"),f&&Array.isArray(f)&&f.map((e,o)=>c.a.createElement(d.a,{value:e.id},e.name))),c.a.createElement(_.a,{id:"coupon_classification"},u.coupon_classification)),c.a.createElement(p.a,{className:"full-width form-control-custom coupon-discout-field",error:u.coupon_code},c.a.createElement(r.a,{htmlFor:"coupon_code"},"Coupon Code"),c.a.createElement(m.a,{id:"coupon_code",name:"coupon_code",type:"text",value:s.coupon_code,onChange:this.handleChange,"aria-describedby":"coupon_code",fullWidth:!0,disabled:o&&s.coupon_code}),c.a.createElement(_.a,{id:"coupon_code"},u.coupon_code))),c.a.createElement("div",{className:"coupon-discout-container"},2===Number(s.coupon_type)?c.a.createElement(p.a,{className:"full-width form-control-custom coupon-discout-field",error:u.coupon_flat_discount},c.a.createElement(r.a,{htmlFor:"coupon_flat_discount"},"Coupon Flat Discount (Numeric)"),c.a.createElement(m.a,{id:"coupon_flat_discount",name:"coupon_flat_discount",type:"text",value:s.coupon_flat_discount,onChange:this.handleChange,"aria-describedby":"coupon_flat_discount",fullWidth:!0}),c.a.createElement(_.a,{id:"coupon_flat_discount"},u.coupon_flat_discount)):c.a.createElement(p.a,{className:"full-width form-control-custom coupon-discout-field",error:u.coupon_percentage},c.a.createElement(r.a,{htmlFor:"coupon_percentage"},"Coupon Percentage* (% - Numeric)"),c.a.createElement(m.a,{id:"coupon_percentage",name:"coupon_percentage",type:"text",value:s.coupon_percentage,onChange:this.handleChange,"aria-describedby":"coupon_percentage",fullWidth:!0}),c.a.createElement(_.a,{id:"coupon_percentage"},u.coupon_percentage)),1===Number(s.coupon_type)&&c.a.createElement(p.a,{className:"full-width form-control-custom coupon-discout-field",error:u.coupon_accessories_percentage},c.a.createElement(r.a,{htmlFor:"coupon_accessories_percentage"},"Coupon Accessory Percentage"),c.a.createElement(m.a,{id:"coupon_accessories_percentage",name:"coupon_accessories_percentage",type:"text",value:s.coupon_accessories_percentage,onChange:this.handleChange,"aria-describedby":"coupon_accessories_percentage",fullWidth:!0}),c.a.createElement(_.a,{id:"coupon_accessories_percentage"},u.coupon_accessories_percentage)),1===Number(s.coupon_type)&&c.a.createElement(p.a,{className:"full-width form-control-custom coupon-discout-field",error:u.coupon_cot_percentage},c.a.createElement(r.a,{htmlFor:"coupon_cot_percentage"},"Coupon Cot Percentage"),c.a.createElement(m.a,{id:"coupon_cot_percentage",name:"coupon_cot_percentage",type:"text",value:s.coupon_cot_percentage,onChange:this.handleChange,"aria-describedby":"coupon_cot_percentage",fullWidth:!0}),c.a.createElement(_.a,{id:"coupon_cot_percentage"},u.coupon_cot_percentage)),c.a.createElement(p.a,{className:"full-width form-control-custom coupon-discout-field",error:u.coupon_max_discount},c.a.createElement(r.a,{htmlFor:"coupon_max_discount"},"Max Discount for Coupon"),c.a.createElement(m.a,{id:"coupon_max_discount",name:"coupon_max_discount",type:"text",value:s.coupon_max_discount,onChange:this.handleChange,"aria-describedby":"coupon_max_discount",fullWidth:!0}),c.a.createElement(_.a,{id:"coupon_max_discount"},u.coupon_max_discount)),c.a.createElement(p.a,{className:"full-width form-control-custom coupon-discout-field",error:u.coupon_min_amount},c.a.createElement(r.a,{htmlFor:"coupon_min_amount"},"Min Cart Amount for Coupon"),c.a.createElement(m.a,{id:"coupon_min_amount",name:"coupon_min_amount",type:"text",value:s.coupon_min_amount,onChange:this.handleChange,"aria-describedby":"coupon_min_amount",fullWidth:!0}),c.a.createElement(_.a,{id:"coupon_min_amount"},u.coupon_min_amount))),c.a.createElement("div",{className:"date-desc-container"},c.a.createElement("div",{className:"date-container"},c.a.createElement(p.a,{className:"full-width form-control-custom coupon-discout-field",error:u.start_date},c.a.createElement(h.a,{id:"start_date",name:"start_date",label:"Start Date",type:"date",value:s.start_date,onChange:this.handleChange,"aria-describedby":"start_date",fullWidth:!0,InputLabelProps:{shrink:!0}}),c.a.createElement(_.a,{id:"start_date"},u.start_date)),c.a.createElement(p.a,{className:"full-width form-control-custom coupon-discout-field",error:u.end_date},c.a.createElement(h.a,{id:"end_date",name:"end_date",label:"End Date",type:"date",value:s.end_date,onChange:this.handleChange,"aria-describedby":"end_date",fullWidth:!0,InputLabelProps:{shrink:!0}}),c.a.createElement(_.a,{id:"end_date"},u.end_date))),c.a.createElement("div",{className:"text-area-desc-container"},c.a.createElement("div",{className:"label"},"Description"),c.a.createElement("textarea",{name:"coupon_description",className:"input-field text-area-desc","aria-label":"minimum height",rowsMin:3,value:s.coupon_description,onChange:this.handleChange}))),c.a.createElement("div",{className:"button-container"},c.a.createElement(C.a,{label:"Submit",onClick:this.checkValidity})))))}}o.default=Object(s.b)((e,o)=>({userDetails:e.userDetails,categories:e.couponsDetails.couponCategories,refreshData:e.couponsDetails.refreshData,reloadComponentWithFreshData:e.couponsDetails.reloadComponentWithFreshData,successData:e.couponsDetails.successData,couponData:e.couponsDetails.couponData,resetCouponData:e.couponsDetails.resetCouponData}),e=>Object(u.b)({getCategoriesAction:g.b,getCouponByIdAction:g.c,createCouponAction:g.a,updateCouponAction:g.g,toggleCouponDataRefresh:g.f,resetAfterTheDataLoaded:g.d,resetCouponComponentAction:g.e},e))(y)}}]);
//# sourceMappingURL=35.0e1c1f45.chunk.js.map