(this.webpackJsonpwakefit=this.webpackJsonpwakefit||[]).push([[18],{314:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var l=a(2),s=a(0),n=a(165);function i(e,t){var a=s.memo(s.forwardRef((function(t,a){return s.createElement(n.a,Object(l.a)({},t,{ref:a}),e)})));return a.muiName=n.a.muiName,a}},323:function(e,t,a){"use strict";var l=a(0),s=a.n(l),n=a(659),i=a(611),r=a(299),o=a(303),c=a(142),d=a.n(c);class m extends l.Component{constructor(...e){super(...e),this.state={toggle:!1},this.handleCollapse=e=>this.setState({toggle:e},()=>this.props.callbackOnClose&&this.props.callbackOnClose())}componentDidMount(){let e=this.props.toggle;this.setState({toggle:e})}render(){let e=this.props,t=e.message,a=e.title,l=e.type,c=this.state.toggle;return s.a.createElement(o.a,{in:c,style:{width:"100%"}},s.a.createElement(n.a,{severity:l,action:s.a.createElement(r.a,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>this.handleCollapse(!1)},s.a.createElement(d.a,{fontSize:"inherit"}))},a&&s.a.createElement(i.a,null,a),t))}}m.defaultProps={message:"",title:"",toggle:!0,type:"info"},t.a=m},329:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var l=a(0);function s(e){var t=e.controlled,a=e.default,s=(e.name,l.useRef(void 0!==t).current),n=l.useState(a),i=n[0],r=n[1];return[s?t:i,l.useCallback((function(e){s||r(e)}),[])]}},331:function(e,t,a){"use strict";var l=a(340);var s=a(341);function n(e,t){return Object(l.a)(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],l=!0,s=!1,n=void 0;try{for(var i,r=e[Symbol.iterator]();!(l=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);l=!0);}catch(o){s=!0,n=o}finally{try{l||null==r.return||r.return()}finally{if(s)throw n}}return a}}(e,t)||Object(s.a)()}a.d(t,"a",(function(){return n}))},340:function(e,t,a){"use strict";function l(e){if(Array.isArray(e))return e}a.d(t,"a",(function(){return l}))},341:function(e,t,a){"use strict";function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}a.d(t,"a",(function(){return l}))},646:function(e,t,a){},704:function(e,t,a){"use strict";a.r(t);var l=a(9),s=a(0),n=a.n(s),i=a(21),r=a(16),o=(a(646),a(85)),c=a(29),d=a(32),m=a(128),u=a(4),h=a(13),p=a(11),g=a(18);function b(e){return t=>{t(Object(u.b)()),Object(p.j)(e).then(e=>{t(Object(u.a)()),t(function(e){return{type:m.a,data:e}}(e.data)),g.b.success(e.data.message)}).catch(e=>{Object(h.a)(e,t)})}}function v(){return{type:m.b}}var k=a(612),y=a(660),E=a(673),N=a(323);const f=["WFPACK","WFT","WFOCOVER"],C=["WFB","WMP"],S=[{label:"Topper",sku:"WFT"},{label:"Outer Cover",sku:"WFOCOVER"},{label:"Sleeping Pillow",sku:"WSP"},{label:"Mattress Protector",sku:"WMP"},{label:"Back Support Cushion",sku:"WBSC"},{label:"Travel Neck Pillow",sku:"WTNP"},{label:"Fitted Bedsheets",sku:"WFB"},{label:"Packaging Material",sku:"WFPACK"}],_=[{id:1,label:"Single Piece",key:"S"},{id:2,label:"Set of 2",key:"D"}],P={WMP:[{id:1,label:"White",key:""},{id:2,label:"Maroon",key:"MAROON"},{id:3,label:"Grey",key:"GREY"}],WFOCOVER:[{id:1,label:"Select",key:""},{id:2,label:"Grey",key:"G"},{id:3,label:"White",key:"W"}]},O={WFB:[{id:1,label:"Serene Flora",key:"FLORA"},{id:2,label:"Leafy Bliss",key:"LEAFY"},{id:3,label:"Dreamy Bubbles",key:"BUBBLES"}]},W={WFT:{types:[{label:"HR Foam",key:"HR"},{label:"Memory Foam",key:"MF"},{label:"Super Soft Foam",key:"SF"},{label:"Cool Fit Foam Topper",key:"CF"}]}};class D extends n.a.Component{constructor(...e){super(...e),this.state={selectedProduct:{order_id:"",item_sku:"",item_dimensions:"",item_quantity:"",pillowCover:""},maxQty:0,stock:null,stockData:"notvalid",note:"",errors:{},enableSubmit:!1},this.componentWillReceiveProps=e=>{console.log(e),e.resetData&&this.resetMissingData()},this.resetMissingData=()=>{this.setState({selectedProduct:{order_id:"",product:"",item_sku:"",length:"",breath:"",height:"",modal:"",type:"",item_dimensions:"",item_quantity:"",pillowCover:""},maxQty:0,stock:null,stockData:"notvalid",note:"",errors:{},enableSubmit:!1},()=>{this.props.resetMissingItem()})},this.getQuantityOptions=()=>{let e=[],t=this.state.maxQty;for(let a=1;a<=t;a++)e.push(n.a.createElement("option",null,a));return e},this.getProductDetails=()=>{let e=this.state,t=e.selectedProduct,a=e.errors,l=e.maxQty,s=e.stockData;console.log("Getting...",this.state);let n={item_sku:t.item_sku,item_dimensions:t.item_dimensions?t.item_dimensions:"",request_type:1};this.setState({stockData:"loading"},()=>{Object(p.ab)(n).then(e=>{0===Number(e.data.stock)?(l=0,a.note="Out of Stock",s="notvalid"):Number(e.data.stock)<5?(l=Number(e.data.stock),s="valid",a.note=""):Number(e.data.stock)>=5&&(l=5,s="valid",a.note=""),setTimeout(()=>this.setState({selectedProduct:t,errors:a,maxQty:l,stockData:s,stock:e.data}),1e3)}).catch(e=>{console.log(e.response),e.response&&e.response.data&&e.response.data.detail&&g.b.error(e.response.data.detail),a.note=e.response&&e.response.data&&e.response.data.message,setTimeout(()=>this.setState({selectedProduct:t,errors:a,maxQty:5,stockData:"notvalid"}),1e3)})})},this.checkValidity=e=>{e.preventDefault();let t=this.state,a=t.selectedProduct,l=t.errors,s=["order_id","product","item_quantity"].every(e=>a[e]),n=!1;l.dimension="",a.order_id||(l.order_id="Please enter Order ID!"),a.product||(l.product="Please select the Product!"),a.item_quantity?this.state.stock&&Number(this.state.stock.stock)<Number(a.item_quantity)&&(l.item_quantity="Should be <= stock",s=!1):(l.item_quantity="Item Qty is Required!",s=!1),f.includes(a.product)?(["WFOCOVER","WFT"].includes(a.product)?a.length&&a.breath&&a.height&&a.modal?n=!0:a.modal||(l.modal="Please select the Modal!"):a.length&&a.breath&&a.height&&(n=!0),a.length||(l.length="Required!"),a.breath||(l.breath="Required!"),a.height||(l.height="Required!")):C.includes(a.product)?(["WFB"].includes(a.product)?a.length&&a.breath&&a.modal?n=!0:a.modal||(l.modal="Please select the Modal!"):a.length&&a.breath&&(n=!0),a.length||(l.length="Required!"),a.breath||(l.breath="Required!")):["WSP"].includes(a.product)?a.type?(n=!0,l.type=""):l.type="Please select the Type!":["WBSC","WTNP"].includes(a.product)&&(n=!0),this.setState({errors:l,enableSubmit:s&&n,note:""},()=>{console.log(s,n,this.state),n&&(console.log("Valid..."),s&&"valid"===this.state.stockData?this.handleSubmit():"notvalid"===this.state.stockData&&this.getProductDetails())})},this.handleChange=e=>{let t=e.target.name,a=e.target.value,l=this.state,s=l.selectedProduct,n=l.errors,i=l.stock,r=l.stockData;switch(t){case"order_id":a?(s[t]=a,n[t]=""):(s[t]="",n[t]="Order Id is Required!");break;case"product":a?(s[t]=a,n={},s.order_id="",s.item_sku=s.product,s.item_dimensions="",s.item_quantity=1,s.dimension="",s.modal="",s.type="",s.length="",s.breath="",s.height="",s.pillowCover="",i=null,r="notvalid",n.note=""):(s[t]=a,n[t]="Please select the Product");break;case"length":case"breath":case"height":a?(s[t]=""!==a?c.c.test(a)?a:s[t]:"",n[t]=""):(s[t]=a,n[t]="Required!"),r="notvalid",i=null,r="notvalid",n.note="";break;case"dimension":if(a){s[t]=a,n[t]="",s[t]=a;let e=a.split("x"),l=/[a-zA-Z]*$/;e.length>0&&e.map(e=>(l.test(e)&&(s.modal=e.replace(/[^a-zA-Z]+/g,"")),"")),s.length=e.length>1&&e[0].replace(/[^\d]/g,"")||"",s.breath=e.length>=2&&e[1].replace(/[^\d]/g,"")||"",s.height=e.length>=3&&e[2].replace(/[^\d]/g,"")||"",i=null,r="notvalid",n.note=""}else s[t]=a,n[t]="Please select the Dimension";break;case"item_quantity":a&&c.g.test(a)&&a.length<4?(s[t]=a,n[t]=this.state.stock&&Number(this.state.stock.stock)>=Number(a)?"":"Should be <= stock"):a||(s[t]="",n[t]="Item Qty is Required!");break;case"pillowCover":s[t]=e.target.checked?a:"",i=null,r="notvalid",n.note="";break;case"modal":s[t]=a,n[t]=!s.product.includes("WMP")&&(a?"":"Required!"),i=null,r="notvalid",n.note="";break;case"type":s[t]=a,n[t]=a?"":"Required!",i=null,r="notvalid",n.note="";break;default:s[t]=a}s.item_dimensions="".concat(s.length).concat(s.breath?"x"+s.breath:"").concat(s.height?"x"+s.height:"")+(["WSP","WBSC","WTNP"].includes(String(s.product))?"":" inch"),["WFT","WMP","WFOCOVER"].includes(s.product)?s.item_sku=s.product+s.modal+(s.length&&s.length.split(".").join(""))+(s.breath&&s.breath.split(".").join(""))+(s.height&&s.height.split(".").join("")):s.item_sku=s.product+(s.length&&s.length.split(".").join(""))+(s.breath&&s.breath.split(".").join(""))+(s.height&&s.height.split(".").join(""))+s.modal+s.type,["item_quantity"].includes(t)&&(n.note=""),this.setState({selectedProduct:s,stock:i,stockData:r,errors:n},()=>{console.log(this.state)})},this.handleSubmit=()=>{let e=this.state.selectedProduct,t={item_sku:e.item_sku+e.pillowCover,item_dimensions:e.item_dimensions,item_quantity:e.item_quantity,item_price:0,order_type:5},a={order_id:e.order_id,carts:[t]};this.props.missingItemAction(a)}}componentWillUnmount(){this.resetMissingData()}render(){let e=this.state,t=e.selectedProduct,a=e.errors;return n.a.createElement("div",{className:"missing-items-container"},n.a.createElement(o.a,{header:"Missing Items"}),n.a.createElement("div",{className:"missing-items-content"},a.note&&n.a.createElement(N.a,{type:"error",message:a.note,toggle:!0,callbackOnClose:()=>this.setState({errors:Object(l.a)({},a,{note:""})})}),n.a.createElement("div",{className:"field-container"},n.a.createElement("div",{className:"label"},"Choose Missing Item :"),n.a.createElement("select",{name:"product",className:"custom-dropdown",value:t.product,onChange:this.handleChange},n.a.createElement("option",{value:""},"Select Missing Item"),S.map(e=>n.a.createElement("option",{key:e.sku,value:e.sku},e.label))),a.product&&n.a.createElement("div",{className:"error-text"},a.product)),["WBSC","WTNP"].includes(t.product)&&n.a.createElement("div",{className:"field-container"},n.a.createElement("div",{className:"label"},"Product SKU :"),n.a.createElement("select",{name:"product",className:"custom-dropdown",value:t.product,onChange:this.handleChange},n.a.createElement("option",{value:""},t.product))),(t.dimension||f.includes(t.product)||C.includes(t.product))&&n.a.createElement("div",{className:"field-container"},n.a.createElement("div",{className:"label"},"Customize Dimensions :"),n.a.createElement("div",{className:"dimension-input-container"},n.a.createElement("div",{className:"input-field-container"},n.a.createElement("input",{name:"length",type:"text",className:"input-field",onChange:this.handleChange,value:t.length,placeholder:"L"}),a.length&&n.a.createElement("div",{className:"error-text"},a.length)),n.a.createElement("div",{className:"input-field-container"},n.a.createElement("input",{name:"breath",type:"text",className:"input-field",onChange:this.handleChange,value:t.breath,placeholder:"B"}),a.breath&&n.a.createElement("div",{className:"error-text"},a.breath)),f.includes(t.product)&&n.a.createElement("div",{className:"input-field-container"},n.a.createElement("input",{name:"height",type:"text",className:"input-field",onChange:this.handleChange,value:t.height,placeholder:"H"}),a.height&&n.a.createElement("div",{className:"error-text"},a.height)))),"WSP"===t.product&&n.a.createElement("div",{className:"field-container"},n.a.createElement("div",{className:"label"},"Type :"),n.a.createElement("select",{name:"type",className:"custom-dropdown",value:t.type,onChange:this.handleChange},n.a.createElement("option",{value:""},"Select Type"),_.map(e=>n.a.createElement("option",{key:"type-".concat(e.key),value:e.key},e.label))),a.type&&n.a.createElement("div",{className:"error-text"},a.type)),O[t.product]&&n.a.createElement("div",{className:"field-container"},n.a.createElement("div",{className:"label"},"Modal :"),n.a.createElement("select",{name:"modal",className:"custom-dropdown",value:t.modal,onChange:this.handleChange},n.a.createElement("option",{value:""},"Select Modal"),O[t.product].map(e=>n.a.createElement("option",{key:"modal-".concat(e.key),value:e.key},e.label))),a.modal&&n.a.createElement("div",{className:"error-text"},a.modal)),["WMP","WFOCOVER"].includes(t.product)&&n.a.createElement("div",{className:"field-container"},n.a.createElement("div",{className:"label"},"Color :"),n.a.createElement("select",{name:"modal",className:"custom-dropdown",value:t.modal,onChange:this.handleChange},P[t.product].map(e=>n.a.createElement("option",{key:"modal-".concat(e.key),value:e.key},e.label))),a.modal&&n.a.createElement("div",{className:"error-text"},a.modal)),W[t.product]&&n.a.createElement("div",{className:"field-container"},n.a.createElement("div",{className:"label"},"Modal :"),n.a.createElement("select",{name:"modal",className:"custom-dropdown",value:t.modal,onChange:this.handleChange},n.a.createElement("option",{value:""},"Select Modal"),W[t.product].types.map(e=>n.a.createElement("option",{key:"modal-".concat(e.key),value:e.key},e.label))),a.modal&&n.a.createElement("div",{className:"error-text"},a.modal)),["WFB"].includes(t.product)&&n.a.createElement("div",{className:"field-container"},n.a.createElement(k.a,{control:n.a.createElement(y.a,{name:"pillowCover",onChange:this.handleChange,checked:"-COVER"===t.pillowCover,value:"-COVER",color:"primary"}),label:"Pillow Cover"})),"valid"===this.state.stockData&&this.state.stock&&n.a.createElement("div",{className:"stock-details"},n.a.createElement("div",{className:"field-container"},n.a.createElement("b",{className:"label"},"Stock :")," ",this.state.stock.stock," items")),"valid"===this.state.stockData&&n.a.createElement("div",{className:"field-container"},n.a.createElement("div",{className:"label"},"Quantity :"),n.a.createElement("select",{name:"item_quantity",className:"custom-dropdown",value:t.item_quantity,onChange:this.handleChange},n.a.createElement("option",{value:""},"Select Quantity"),this.getQuantityOptions()),a.item_quantity&&n.a.createElement("div",{className:"error-text"},a.item_quantity)),"valid"===this.state.stockData&&n.a.createElement("div",{className:"field-container"},n.a.createElement("div",{className:"label"},"Order ID :"),n.a.createElement("div",{className:"dimension-input-container"},n.a.createElement("input",{name:"order_id",type:"text",className:"input-field",onChange:this.handleChange,value:t.order_id,placeholder:"Order ID"})),a.order_id&&n.a.createElement("div",{className:"error-text"},a.order_id)),n.a.createElement("div",{className:"add-product-footer"},"loading"!==this.state.stockData?n.a.createElement(d.a,{label:"notvalid"===this.state.stockData?"Check Product Availability":"Create Missing Items",onClick:this.checkValidity}):n.a.createElement(E.a,{className:"progress"})),n.a.createElement("div",{className:"note"},n.a.createElement("b",null,n.a.createElement("u",null,"NOTE")," :"),n.a.createElement("div",{className:"note-text"},"* ",n.a.createElement("span",{className:"break-word"},"Here, Items will be created with amount zero.")),n.a.createElement("div",{className:"note-text"},"Ex: ",n.a.createElement("span",{className:"break-word"},"If in case, the logistic partner has lost that item and payment type is COD, this is not recommended to create as missing item here.")))))}}t.default=Object(i.b)((e,t)=>({userDetails:e.userDetails,resetData:e.missingItemDetails.onCreateItemSuccess}),e=>Object(r.b)({missingItemAction:b,resetMissingItem:v},e))(D)}}]);
//# sourceMappingURL=18.519fef0f.chunk.js.map