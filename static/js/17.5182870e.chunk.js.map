{"version":3,"sources":["containers/Dashboard/components/Timestamp/index.js","components/PaginationComponent/index.js","containers/CreateCoupon/action.js","containers/ListAllCoupons/components/ListAllCouponsTable/index.js","containers/ListAllCoupons/action.js","containers/ListAllCoupons/index.js"],"names":["timestampFilter","filter","row","_original","id","String","getDateTime","toLocaleLowerCase","includes","value","Timestamp","props","PaginationComponent","Component","render","this","offset","limit","total","onPrevClick","onNextClick","dropDownValues","onLimitChange","filtered","filteredData","className","disabled","onClick","aria-hidden","Array","isArray","length","onChange","map","option","index","key","defaultProps","getCategoriesAction","dispatch","getCouponsCategories","then","response","data","type","GET_COUPON_CATEGORIES_SUCCESS","catch","error","handleError","createCouponAction","showLoader","createCoupon","hideLoader","toggleCouponDataRefresh","CREATE_COUPON_SUCCESS","createCouponSuccess","updateCouponAction","editCoupon","getCouponByIdSuccess","message","toast","success","getCouponByIdAction","getCouponById","GET_COUPON_DETAILS_SUCCESS","toggle","TOGGLE_COUPON_REFRESH","resetCouponComponentAction","RESET_COMPONENT_DATA","resetAfterTheDataLoaded","RESET_COUPON_VAR","ListAllCouponsTable","constructor","super","resetTable","console","log","event","setState","Number","target","handleClick","state","getAllCouponsAction","moreActions","rowInfo","userDetails","action","coupon_uid","showPopup","header","showSubmitBtn","onSubmit","editCouponAction","coupon_id","updated_by","login_id","listActions","original","to","is_active","bulkOrder","isUpdatingBulk","orderStatusData","componentDidMount","count","defaultCouponsSize","componentWillReceiveProps","refreshCoupons","resetCouponsData","componentWillUnmount","results","filterable","minRows","pageSize","NoDataComponent","defaultFilterMethod","columns","Header","maxWidth","Cell","accessor","minWidth","coupon_count","coupon_description","width","filterMethod","params","getAllCoupons","GET_ALL_COUPONS","hidePopup","EDIT_COUPON_SUCCESS","editCouponSuccess","RESET_REFRESH_COUPONS","ListAllCoupons","getNoOrders","componentWillMount","coupons","title","PageHeader","Button","label","defaultLimit","connect","ownProps","couponsDetails","couponsList","bindActionCreators"],"mappings":"qGAAA,8DAGA,MAOaA,EAAkB,CAACC,EAAQC,IAC7BA,EAAIC,UAAUF,EAAOG,KAAOC,OAAOC,YAAYD,OAAOH,EAAIC,UAAUF,EAAOG,OAAOG,oBAAoBC,SAASP,EAAOQ,MAAMF,qBAGxHG,IAXIC,GACXA,EAAMF,MACC,6BAAMH,YAAYK,EAAMF,QAE5B,I,iCCPX,2BAIA,MAAMG,UAA4BC,YAC9BC,SAAU,IAAD,EAC2GC,KAAKJ,MAA/GK,EADD,EACCA,OAAQC,EADT,EACSA,MAAOC,EADhB,EACgBA,MAAOC,EADvB,EACuBA,YAAaC,EADpC,EACoCA,YAAaC,EADjD,EACiDA,eAAgBC,EADjE,EACiEA,cAAeC,EADhF,EACgFA,SAAUC,EAD1F,EAC0FA,aAC/F,OACI,yBAAKC,UAAU,wBACX,4BACIA,UAAU,4BACVC,SAAqB,IAAXV,EACVW,QAAS,IAAMR,EAAY,SAC3B,uBAAGM,UAAU,mBAAmBG,cAAY,UAEhD,yBAAKH,UAAU,mBAAmBT,EAAlC,OAA8CA,EAASC,GAASC,EAAQF,EAASC,EAAQC,EAAzF,OAAoGA,GACpG,4BACIO,UAAU,4BACVC,SAAUV,EAASC,GAASC,EAC5BS,QAAS,IAAMP,EAAY,SAC3B,uBAAGK,UAAU,oBAAoBG,cAAY,UAEhDC,MAAMC,QAAQT,IAAmBA,EAAeU,OAAS,GAAK,4BAAQN,UAAU,kBAAkBO,SAAUV,EAAeb,MAAOQ,GAC9HI,EAAeY,IAAI,CAACC,EAAQC,IAAU,4BAAQC,IAAKD,EAAO1B,MAAOyB,GAASA,KAG9EL,MAAMC,QAAQP,IACXA,EAASQ,OAAS,GAClBF,MAAMC,QAAQN,IACdA,EAAaO,OAAS,GACtB,yBAAKN,UAAU,wBAAuB,gDAAtC,IAAgED,EAAaO,UAMjGnB,EAAoByB,aAAe,CAC/BrB,OAAQ,EACRC,MAAO,EACPC,MAAO,EACPG,eAAgB,IAaLT,O,uDCrDf,yRAMO,SAAS0B,IACZ,OAAQC,IAEJC,cACKC,KAAKC,IAUX,IAAqCC,EAR5BJ,GAQ4BI,EARSD,EAASC,KASnD,CACHC,KAAMC,IACNF,YATKG,MAAMC,IACHC,YAAYD,EAAOR,MAY5B,SAASU,EAAmBN,GAC/B,OAAQJ,IACJA,EAASW,eACTC,YAAaR,GACRF,KAAKC,IACFH,EAASa,eACTb,EAASc,GAAwB,IACjCd,EAQT,SAA6BI,GAChC,MAAO,CACHC,KAAMU,IACNX,QAXiBY,CAAoBb,EAASC,SAEzCG,MAAMC,IACHC,YAAYD,EAAOR,MAY5B,SAASiB,EAAmBb,GAC/B,OAAQJ,IACJA,EAASW,eACTO,YAAWd,GACNF,KAAKC,IACFH,EAASa,eACTb,EAASc,GAAwB,IAEjCd,EAASmB,EAAqBf,IAC9BD,EAASC,MACLD,EAASC,KAAKgB,SACdC,IAAMC,QAAQnB,EAASC,KAAKgB,WAEnCb,MAAMC,IACHC,YAAYD,EAAOR,MAY5B,SAASuB,EAAoBnB,GAChC,OAAQJ,IACJA,EAASW,eACTa,YAAcpB,GACTF,KAAKC,IACFH,EAASa,eACTb,EAASmB,EAAqBhB,EAASC,SAE1CG,MAAMC,IACHC,YAAYD,EAAOR,MAK5B,SAASmB,EAAqBf,GACjC,MAAO,CACHC,KAAMoB,IACNrB,QAID,SAASU,EAAwBY,GACpC,MAAO,CACHrB,KAAMsB,IACNvB,KAAMsB,GAIP,SAASE,IACZ,MAAO,CACHvB,KAAMwB,KAIP,SAASC,IACZ,MAAO,CACHzB,KAAM0B,O,qLCxGd,MAAMjD,EAAiB,CAAC,GAAI,GAAI,GAAI,IAAK,IAAK,KAE9C,MAAMkD,UAA4B1D,YAE9B2D,YAAY7D,GACR8D,MAAM9D,GADS,KA2CnB+D,WAAa,KACTC,QAAQC,IAAI,gBA5CG,KA+CnBtD,cAAiBuD,IACb9D,KAAK+D,SAAS,CAAE7D,MAAO8D,OAAOF,EAAMG,OAAOvE,QAAU,IAAMM,KAAKkE,YAAY,WAhD7D,KAmDnBA,YAAerC,IAAU,IAAD,EACW7B,KAAKmE,MAA9BjE,EADc,EACdA,MAAOD,EADO,EACPA,OAAQE,EADD,EACCA,MACfiE,EAAwBpE,KAAKJ,MAA7BwE,oBACNpE,KAAK+D,SAAS,CACV9D,OAAiB,SAAT4B,EACJ5B,EAASC,EAAQC,EAAQF,EAASC,EAAQD,EAEjC,SAAT4B,GAAmB5B,EAASC,GAAS,EAAID,EAASC,EAAQ,GAC/D,KAAO,IAAD,EACmBF,KAAKmE,MAAvBjE,EADD,EACCA,MAAOD,EADR,EACQA,OACbmE,GAAuBA,EAAoB,CAAElE,QAAOD,cA7DzC,KAiEnBoE,YAAc,CAACC,EAASjD,EAAK3B,KAAW,IAC9B6E,EAAgBvE,KAAKJ,MAArB2E,YACFC,EAAkB,cAARnD,EAAsB,wBACxB,cAARA,EAAsB,SAAW,GACjCoD,EAAaH,EAAQG,WACzBzE,KAAKJ,MAAM8E,UAAU,CACjB7C,KAAM,eACN8C,OAAQ,eACR/C,KAAM,CACFgB,QAAQ,wBAAD,OAA0B4B,EAA1B,YAAoCC,EAApC,KACPG,eAAe,EAEfC,SAAU,KACN7E,KAAKJ,MAAMkF,iBAAiB,CACxBC,UAAWT,EAAQS,UACnB,CAAC1D,GAAM3B,EACPsF,WAAYT,EAAYU,gBAjFzB,KAwFnBC,YAAe/F,IACX,IAAImF,EAAUnF,EAAIgG,SAClB,OACI,6BACKb,GACGA,EAAQG,YACR,yBAAK/D,UAAU,uBAAsB,kBAAC,IAAD,CAAM0E,GAAE,wBAAmBd,EAAQS,YAAnC,SACzC,6BAAoC,IAA9Bf,OAAOM,EAAQe,WACjB,yBAAK3E,UAAU,8BAA8BE,QAAS,IAAMZ,KAAKqE,YAAYC,EAAS,YAAa,IAAnG,eACA,yBAAK5D,UAAU,8BAA8BE,QAAS,IAAMZ,KAAKqE,YAAYC,EAAS,YAAa,IAAnG,aAEJ,yBAAK5D,UAAU,8BAA8BE,QAAS,IAAMZ,KAAKqE,YAAYC,EAAS,YAAa,IAAnG,YAjGRtE,KAAKmE,MAAQ,CAETlE,OAAQ,EACRC,MAAO,GACPC,MAAO,EAEPmF,UAAW,GACXC,gBAAgB,EAChBC,gBAAiB,IAIzBC,oBACQzF,KAAKJ,MAAMgC,MAAQ5B,KAAKJ,MAAMgC,KAAK8D,OAAS1B,OAAOhE,KAAKJ,MAAMgC,KAAK8D,SAAW1B,OAAOhE,KAAKmE,MAAMhE,QAChGH,KAAK+D,SAAS,CACV7D,MAAOF,KAAKJ,MAAM+F,mBAClBxF,MAAOH,KAAKJ,MAAMgC,KAAK8D,QAKnCE,0BAA0BhG,GAAQ,IAAD,EACLI,KAAKmE,MAAvBjE,EADuB,EACvBA,MAAOD,EADgB,EAChBA,OACTL,EAAMiG,iBACN7F,KAAKJ,MAAMkG,mBACX9F,KAAKJ,MAAMwE,oBAAoB,CAC3BlE,MAAOA,EACPD,OAAQA,KAGZL,EAAMgC,MAAQhC,EAAMgC,KAAK8D,OAAS1B,OAAOpE,EAAMgC,KAAK8D,SAAW1B,OAAOhE,KAAKmE,MAAMhE,QACjFH,KAAK+D,SAAS,CACV5D,MAAOP,EAAMgC,KAAK8D,QAK9BK,uBACI/F,KAAK2D,aAgET5D,SAAU,IACA6B,EAAS5B,KAAKJ,MAAdgC,KACN,OACI,yBAAKlB,UAAU,2BACX,kBAAC,IAAD,CACIkB,KAAMA,EAAKoE,QACXC,YAAU,EACVC,QAAS,EACTC,SAAU,IACVtG,oBAAqB,IACjB,kBAACA,EAAA,EAAD,CACIS,eAAgBA,EAChBC,cAAeP,KAAKO,cACpBN,OAAQD,KAAKmE,MAAMlE,OACnBE,MAAOH,KAAKmE,MAAMhE,MAClBD,MAAOF,KAAKmE,MAAMjE,MAClBE,YAAaJ,KAAKkE,YAClB7D,YAAaL,KAAKkE,cAG1BkC,gBAAiB,IAAM,KACvBC,oBAAqB,CAACnH,EAAQC,IAC1BG,OAAOH,EAAID,EAAOG,KAAKG,oBAAoBC,SAASP,EAAOQ,MAAMF,qBACrE8G,QAAS,CAAC,CACNC,OAAQ,OACRlH,GAAI,MACJmH,SAAU,GACVP,YAAY,EACZQ,KAAOtH,GAAQ,6BAAMA,EAAIiC,MAAQ,IAClC,CACCmF,OAAQ,aACRG,SAAU,aACVC,SAAU,IACVF,KAAOtH,GAAQ,6BACVA,EAAIgG,UACDhG,EAAIgG,SAASV,YACb,kBAAC,IAAD,CAAMR,OAAO,SAASmB,GAAE,mBAAcjG,EAAIgG,SAASV,aAAetF,EAAIgG,SAASV,cAExF,CACC8B,OAAQ,eACRG,SAAU,mBACVC,SAAU,KACX,CACCJ,OAAQ,sBACRG,SAAU,6BACVC,SAAU,KACX,CACCJ,OAAQ,eACRG,SAAU,cACVC,SAAU,KACX,CACCJ,OAAQ,aACRG,SAAU,eACVC,SAAU,GACVF,KAAOtH,GAAQ,6BACVA,EAAIgG,UACDhG,EAAIgG,SAASyB,aAAe,EAC5B,kBAAC,IAAD,CAAM3C,OAAO,SAASmB,GAAE,mBAAcjG,EAAIgG,SAASV,aAAetF,EAAIgG,SAASyB,cAC7E,IAGX,CACCL,OAAQ,qBACRG,SAAU,oBACVC,SAAU,IACX,CACCJ,OAAQ,gBACRG,SAAU,uBACVC,SAAU,IACX,CACCJ,OAAQ,eACRG,SAAU,sBACVC,SAAU,IACX,CACCJ,OAAQ,kBACRG,SAAU,oBACVC,SAAU,IACX,CACCJ,OAAQ,sBACRG,SAAU,qBACVC,SAAU,IACVF,KAAOtH,GAAQ,yBAAKuB,UAAU,cAAcvB,EAAIgG,SAAS0B,qBAC1D,CACCN,OAAQ,aACRG,SAAU,aACVC,SAAU,KACX,CACCJ,OAAQ,WACRG,SAAU,WACVC,SAAU,KACX,CACCJ,OAAQ,aACRG,SAAU,oBACVC,SAAU,IACVG,MAAO,IACPL,KAAM9G,IACNoH,aAAc9H,KACf,CACCsH,OAAQ,UACRG,SAAU,UACVT,YAAY,EACZU,SAAU,IACVF,KAAMzG,KAAKkF,kBAQpB1B,Q,wCC1NR,SAASY,EAAoB4C,GAClC,OAAQxF,IACNA,EAASW,eACT8E,YAAcD,GACXtF,KAAKC,IAUL,IAA8BC,EAT7BJ,EAASa,eACTb,GAQ6BI,EARCD,EAASC,KAStC,CACLC,KAAMqF,IACNtF,YATGG,MAAMC,IACLC,YAAYD,EAAOR,MAYpB,SAASsD,EAAiBlD,GAC/B,OAAQJ,IACNA,EAASW,eACTO,YAAWd,GACRF,KAAKC,IACJH,EAAS2F,eACT3F,EAASa,eACTb,EAQD,SAA2BI,GAChC,MAAO,CACLC,KAAMuF,IACNxF,QAXayF,CAAkB1F,EAASC,SAErCG,MAAMC,IACLC,YAAYD,EAAOR,MAYpB,SAASsE,IACd,MAAO,CACLjE,KAAMyF,K,qBCrCV,MAAMC,UAAuBzH,YAAW,eAAD,oBAanC0H,YAAc,IAAM,yBAAK9G,UAAU,aAAf,sDAXpB+G,qBACIzH,KAAKJ,MAAMwE,oBAAoB,CAC3BlE,MANe,GAOfD,OAAQ,IAIhB8F,uBACI/F,KAAKJ,MAAMwD,6BAKfrD,SAAU,IAAD,EAC8GC,KAAKJ,MAAlH8H,EADD,EACCA,QAAS7B,EADV,EACUA,eAAgBtB,EAD1B,EAC0BA,YAAaH,EADvC,EACuCA,oBAAqBU,EAD5D,EAC4DA,iBAAkBgB,EAD9E,EAC8EA,iBAAkBpB,EADhG,EACgGA,UACjGiD,EAAK,0BAAuBD,GAAWA,EAAQhC,MAAnB,YAAgCgC,EAAQhC,OAAU,IAClF,OACI,yBAAKhF,UAAU,qBACX,kBAACkH,EAAA,EAAD,CACIjD,OAAQgD,IAEZ,yBAAKjH,UAAU,sBACX,kBAAC,IAAD,CAAM0E,GAAI,gBACN,kBAACyC,EAAA,EAAD,CAAQC,MAAM,oBAGrBJ,EACG,kBAAC,EAAD,CACInD,YAAaA,EACb3C,KAAM8F,EACN/B,mBAlCG,GAmCHE,eAAgBA,EAChBzB,oBAAqBA,EACrBU,iBAAkBA,EAClBgB,iBAAkBA,EAClBiC,aAvCG,GAwCHrD,UAAWA,IAEf1E,KAAKwH,gBAmBVQ,sBAZS,CAAC7D,EAAO8D,KACrB,CACH1D,YAAaJ,EAAMI,YACnBmD,QAASvD,EAAM+D,eAAeC,YAC9BtC,eAAgB1B,EAAM+D,eAAerC,iBAIjBrE,GACjB4G,YAAmB,CAAEhE,sBAAqBU,mBAAkB1B,+BAA4B0C,mBAAkBpB,eAAalD,GAGnHwG,CAA6CT","file":"static/js/17.5182870e.chunk.js","sourcesContent":["import React from 'react';\r\nimport { getDateTime } from '../../../../config/time';\r\n\r\nconst Timestamp = (props) => {\r\n    if (props.value) {\r\n        return <div>{getDateTime(props.value)}</div>\r\n    }\r\n    return \"\"\r\n}\r\n\r\nexport const timestampFilter = (filter, row) => {\r\n    return row._original[filter.id] && String(getDateTime(String(row._original[filter.id]))).toLocaleLowerCase().includes(filter.value.toLocaleLowerCase())\r\n}\r\n\r\nexport default Timestamp;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './style.scss';\r\n\r\nclass PaginationComponent extends Component {\r\n    render() {\r\n        let { offset, limit, total, onPrevClick, onNextClick, dropDownValues, onLimitChange, filtered, filteredData } = this.props;\r\n        return (\r\n            <div className=\"pagination-container\">\r\n                <button\r\n                    className=\"navigation-button pointer\"\r\n                    disabled={offset === 0 ? true : false}\r\n                    onClick={() => onPrevClick(\"prev\")}>\r\n                    <i className=\"fa fa-angle-left\" aria-hidden=\"true\"></i>\r\n                </button>\r\n                <div className=\"pagination-text\">{offset} to {offset + limit <= total ? offset + limit : total} of {total}</div>\r\n                <button\r\n                    className=\"navigation-button pointer\"\r\n                    disabled={offset + limit >= total ? true : false}\r\n                    onClick={() => onNextClick(\"next\")}>\r\n                    <i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i>\r\n                </button>\r\n                {Array.isArray(dropDownValues) && dropDownValues.length > 0 && <select className=\"custom-dropdown\" onChange={onLimitChange} value={limit}>\r\n                    {dropDownValues.map((option, index) => <option key={index} value={option}>{option}</option>)}\r\n                </select>}\r\n\r\n                {Array.isArray(filtered) &&\r\n                    filtered.length > 0 &&\r\n                    Array.isArray(filteredData) &&\r\n                    filteredData.length > 0 &&\r\n                    <div className=\"matched-records-data\"><b>Matched Records :</b> {filteredData.length}</div>}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nPaginationComponent.defaultProps = {\r\n    offset: 0,\r\n    limit: 0,\r\n    total: 0,\r\n    dropDownValues: []\r\n}\r\n\r\nPaginationComponent.propTypes = {\r\n    offset: PropTypes.number.isRequired,\r\n    limit: PropTypes.number.isRequired,\r\n    total: PropTypes.number.isRequired,\r\n    onPrevClick: PropTypes.func.isRequired,\r\n    onNextClick: PropTypes.func.isRequired,\r\n    dropDownValues: PropTypes.array,\r\n    onLimitChange: PropTypes.func\r\n}\r\n\r\nexport default PaginationComponent;","import { GET_COUPON_CATEGORIES_SUCCESS, CREATE_COUPON_SUCCESS, GET_COUPON_DETAILS_SUCCESS, TOGGLE_COUPON_REFRESH, RESET_COMPONENT_DATA, RESET_COUPON_VAR } from \"./constants\";\r\nimport { showLoader, hideLoader } from \"../../components/Loader/action\";\r\nimport handleError from \"../../errorHandler\";\r\nimport { getCouponsCategories, createCoupon, getCouponById, editCoupon } from \"../../api\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport function getCategoriesAction() {\r\n    return (dispatch) => {\r\n        // dispatch(showLoader());\r\n        getCouponsCategories()\r\n            .then(response => {\r\n                // dispatch(hideLoader());\r\n                dispatch(getCouponsCategoriesSuccess(response.data));\r\n            })\r\n            .catch(error => {\r\n                handleError(error, dispatch);\r\n            });\r\n    }\r\n}\r\n\r\nexport function getCouponsCategoriesSuccess(data) {\r\n    return {\r\n        type: GET_COUPON_CATEGORIES_SUCCESS,\r\n        data\r\n    }\r\n}\r\n\r\nexport function createCouponAction(data) {\r\n    return (dispatch) => {\r\n        dispatch(showLoader());\r\n        createCoupon(data)\r\n            .then(response => {\r\n                dispatch(hideLoader());\r\n                dispatch(toggleCouponDataRefresh(true));\r\n                dispatch(createCouponSuccess(response.data));\r\n            })\r\n            .catch(error => {\r\n                handleError(error, dispatch);\r\n            });\r\n    }\r\n}\r\n\r\nexport function createCouponSuccess(data) {\r\n    return {\r\n        type: CREATE_COUPON_SUCCESS,\r\n        data\r\n    }\r\n}\r\n\r\nexport function updateCouponAction(data) {\r\n    return (dispatch) => {\r\n        dispatch(showLoader());\r\n        editCoupon(data)\r\n            .then(response => {\r\n                dispatch(hideLoader());\r\n                dispatch(toggleCouponDataRefresh(true));\r\n                // dispatch(updateCouponSuccess(response.data));\r\n                dispatch(getCouponByIdSuccess(data));\r\n                response.data &&\r\n                    response.data.message &&\r\n                    toast.success(response.data.message);\r\n            })\r\n            .catch(error => {\r\n                handleError(error, dispatch);\r\n            });\r\n    }\r\n}\r\n\r\n// export function updateCouponSuccess(data) {\r\n//     return {\r\n//         type: UPDATE_COUPON_SUCCESS,\r\n//         data\r\n//     }\r\n// }\r\n\r\nexport function getCouponByIdAction(data) {\r\n    return (dispatch) => {\r\n        dispatch(showLoader());\r\n        getCouponById(data)\r\n            .then(response => {\r\n                dispatch(hideLoader());\r\n                dispatch(getCouponByIdSuccess(response.data));\r\n            })\r\n            .catch(error => {\r\n                handleError(error, dispatch);\r\n            });\r\n    }\r\n}\r\n\r\nexport function getCouponByIdSuccess(data) {\r\n    return {\r\n        type: GET_COUPON_DETAILS_SUCCESS,\r\n        data\r\n    }\r\n}\r\n\r\nexport function toggleCouponDataRefresh(toggle) {\r\n    return {\r\n        type: TOGGLE_COUPON_REFRESH,\r\n        data: toggle\r\n    }\r\n}\r\n\r\nexport function resetCouponComponentAction() {\r\n    return {\r\n        type: RESET_COMPONENT_DATA\r\n    }\r\n}\r\n\r\nexport function resetAfterTheDataLoaded() {\r\n    return {\r\n        type: RESET_COUPON_VAR\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport './style.scss';\r\nimport { Link } from 'react-router-dom';\r\nimport ReactTable from 'react-table';\r\nimport Timestamp, { timestampFilter } from '../../../Dashboard/components/Timestamp';\r\nimport PaginationComponent from '../../../../components/PaginationComponent';\r\n\r\nconst dropDownValues = [10, 25, 50, 100, 150, 200];\r\n\r\nclass ListAllCouponsTable extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            // For Pagination\r\n            offset: 0,\r\n            limit: 50,\r\n            total: 0,\r\n\r\n            bulkOrder: [],\r\n            isUpdatingBulk: false,\r\n            orderStatusData: {}\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.data && this.props.data.count && Number(this.props.data.count) !== Number(this.state.total)) {\r\n            this.setState({\r\n                limit: this.props.defaultCouponsSize,\r\n                total: this.props.data.count\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(props) {\r\n        let { limit, offset } = this.state;\r\n        if (props.refreshCoupons) {\r\n            this.props.resetCouponsData();\r\n            this.props.getAllCouponsAction({\r\n                limit: limit,\r\n                offset: offset\r\n            });\r\n        }\r\n        if (props.data && props.data.count && Number(props.data.count) !== Number(this.state.total)) {\r\n            this.setState({\r\n                total: props.data.count\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.resetTable();\r\n    }\r\n\r\n    resetTable = () => {\r\n        console.log(\"Reseting...\");\r\n    }\r\n\r\n    onLimitChange = (event) => {\r\n        this.setState({ limit: Number(event.target.value) }, () => this.handleClick(\"reset\"));\r\n    }\r\n\r\n    handleClick = (type) => {\r\n        let { limit, offset, total } = this.state;\r\n        let { getAllCouponsAction } = this.props;\r\n        this.setState({\r\n            offset: type === \"next\" ?\r\n                offset + limit < total ? offset + limit : offset\r\n                :\r\n                type === \"prev\" && offset - limit >= 0 ? offset - limit : 0\r\n        }, () => {\r\n            let { limit, offset } = this.state;\r\n            getAllCouponsAction && getAllCouponsAction({ limit, offset });\r\n        });\r\n    }\r\n\r\n    moreActions = (rowInfo, key, value) => {\r\n        let { userDetails } = this.props;\r\n        let action = (key === \"is_active\" ? \"Activate/ De-activate\" :\r\n            key === \"is_delete\" ? \"Delete\" : \"\");\r\n        let coupon_uid = rowInfo.coupon_uid;\r\n        this.props.showPopup({\r\n            type: \"confirmation\",\r\n            header: \"Confirmation\",\r\n            data: {\r\n                message: `Are you sure want to ${action} ${coupon_uid}?`,\r\n                showSubmitBtn: true,\r\n                // showCancelBtn: true,\r\n                onSubmit: () => {\r\n                    this.props.editCouponAction({\r\n                        coupon_id: rowInfo.coupon_id,\r\n                        [key]: value,\r\n                        updated_by: userDetails.login_id\r\n                    })\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    listActions = (row) => {\r\n        let rowInfo = row.original;\r\n        return (\r\n            <div>\r\n                {rowInfo &&\r\n                    rowInfo.coupon_uid &&\r\n                    <div className=\"cursor-pointer edit\"><Link to={`/coupons/edit/${rowInfo.coupon_id}`}>Edit</Link></div>}\r\n                <div>{Number(rowInfo.is_active) === 1 ?\r\n                    <div className=\"cursor-pointer custom-badge\" onClick={() => this.moreActions(rowInfo, 'is_active', 0)}>De-Activate</div> :\r\n                    <div className=\"cursor-pointer custom-badge\" onClick={() => this.moreActions(rowInfo, 'is_active', 1)}>Activate</div>}\r\n                </div>\r\n                <div className=\"cursor-pointer custom-badge\" onClick={() => this.moreActions(rowInfo, 'is_delete', 1)}>Delete</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        let { data } = this.props;\r\n        return (\r\n            <div className=\"coupons-table-container\">\r\n                <ReactTable\r\n                    data={data.results}\r\n                    filterable\r\n                    minRows={0}\r\n                    pageSize={999}\r\n                    PaginationComponent={() =>\r\n                        <PaginationComponent\r\n                            dropDownValues={dropDownValues}\r\n                            onLimitChange={this.onLimitChange}\r\n                            offset={this.state.offset}\r\n                            total={this.state.total}\r\n                            limit={this.state.limit}\r\n                            onPrevClick={this.handleClick}\r\n                            onNextClick={this.handleClick}\r\n                        />\r\n                    }\r\n                    NoDataComponent={() => null}\r\n                    defaultFilterMethod={(filter, row) =>\r\n                        String(row[filter.id]).toLocaleLowerCase().includes(filter.value.toLocaleLowerCase())}\r\n                    columns={[{\r\n                        Header: 'S.No',\r\n                        id: 'row',\r\n                        maxWidth: 50,\r\n                        filterable: false,\r\n                        Cell: (row) => <div>{row.index + 1}</div>\r\n                    }, {\r\n                        Header: \"Coupons Id\",\r\n                        accessor: \"coupon_uid\",\r\n                        minWidth: 150,\r\n                        Cell: (row) => <div>\r\n                            {row.original &&\r\n                                row.original.coupon_uid &&\r\n                                <Link target=\"_blank\" to={`/coupons/${row.original.coupon_uid}`}>{row.original.coupon_uid}</Link>}\r\n                        </div>\r\n                    }, {\r\n                        Header: \"Coupons Type\",\r\n                        accessor: \"coupon_type_name\",\r\n                        minWidth: 150\r\n                    }, {\r\n                        Header: \"Classification Type\",\r\n                        accessor: \"coupon_classification_name\",\r\n                        minWidth: 150,\r\n                    }, {\r\n                        Header: \"Coupons Code\",\r\n                        accessor: \"coupon_code\",\r\n                        minWidth: 150,\r\n                    }, {\r\n                        Header: \"#of Orders\",\r\n                        accessor: \"coupon_count\",\r\n                        minWidth: 80,\r\n                        Cell: (row) => <div>\r\n                            {row.original &&\r\n                                row.original.coupon_count > 0 ?\r\n                                <Link target=\"_blank\" to={`/coupons/${row.original.coupon_uid}`}>{row.original.coupon_count}</Link>\r\n                                : 0\r\n                            }\r\n                        </div>\r\n                    }, {\r\n                        Header: \"Coupons Percentage\",\r\n                        accessor: \"coupon_percentage\",\r\n                        minWidth: 90,\r\n                    }, {\r\n                        Header: \"Flat Discount\",\r\n                        accessor: \"coupon_flat_discount\",\r\n                        minWidth: 80,\r\n                    }, {\r\n                        Header: \"Max Discount\",\r\n                        accessor: \"coupon_max_discount\",\r\n                        minWidth: 80,\r\n                    }, {\r\n                        Header: \"Min Cart Amount\",\r\n                        accessor: \"coupon_min_amount\",\r\n                        minWidth: 80,\r\n                    }, {\r\n                        Header: \"Coupons Description\",\r\n                        accessor: \"coupon_description\",\r\n                        minWidth: 150,\r\n                        Cell: (row) => <div className=\"break-word\">{row.original.coupon_description}</div>\r\n                    }, {\r\n                        Header: \"Start Date\",\r\n                        accessor: \"start_date\",\r\n                        minWidth: 150,\r\n                    }, {\r\n                        Header: \"End Date\",\r\n                        accessor: \"end_date\",\r\n                        minWidth: 150,\r\n                    }, {\r\n                        Header: \"Created At\",\r\n                        accessor: \"created_timestamp\",\r\n                        minWidth: 150,\r\n                        width: 175,\r\n                        Cell: Timestamp,\r\n                        filterMethod: timestampFilter\r\n                    }, {\r\n                        Header: \"Actions\",\r\n                        accessor: \"actions\",\r\n                        filterable: false,\r\n                        minWidth: 150,\r\n                        Cell: this.listActions\r\n                    }]}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ListAllCouponsTable;\r\n","import { GET_ALL_COUPONS, EDIT_COUPON_SUCCESS, RESET_REFRESH_COUPONS } from \"./constants\";\r\nimport { showLoader, hideLoader } from \"../../components/Loader/action\";\r\nimport handleError from \"../../errorHandler\";\r\nimport { getAllCoupons, editCoupon } from \"../../api\";\r\nimport { hidePopup } from \"../../components/Popup/action\";\r\n// import { toast } from \"react-toastify\";\r\n\r\nexport function getAllCouponsAction(params) {\r\n  return (dispatch) => {\r\n    dispatch(showLoader());\r\n    getAllCoupons(params)\r\n      .then(response => {\r\n        dispatch(hideLoader());\r\n        dispatch(getAllCouponsSuccess(response.data));\r\n      })\r\n      .catch(error => {\r\n        handleError(error, dispatch);\r\n      });\r\n  }\r\n}\r\n\r\nexport function getAllCouponsSuccess(data) {\r\n  return {\r\n    type: GET_ALL_COUPONS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function editCouponAction(data) {\r\n  return (dispatch) => {\r\n    dispatch(showLoader());\r\n    editCoupon(data)\r\n      .then(response => {\r\n        dispatch(hidePopup());\r\n        dispatch(hideLoader());\r\n        dispatch(editCouponSuccess(response.data));\r\n      })\r\n      .catch(error => {\r\n        handleError(error, dispatch);\r\n      });\r\n  }\r\n}\r\n\r\nexport function editCouponSuccess(data) {\r\n  return {\r\n    type: EDIT_COUPON_SUCCESS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function resetCouponsData() {\r\n  return {\r\n    type: RESET_REFRESH_COUPONS\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport './style.scss';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport PageHeader from '../../components/PageHeader';\r\nimport ListAllCouponsTable from './components/ListAllCouponsTable';\r\nimport { getAllCouponsAction, editCouponAction, resetCouponsData } from './action';\r\nimport { resetCouponComponentAction } from '../CreateCoupon/action';\r\nimport { showPopup } from '../../components/Popup/action';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '../../components/Button';\r\n\r\n\r\nconst defaultCouponsSize = 50;\r\n\r\nclass ListAllCoupons extends Component {\r\n\r\n    componentWillMount() {\r\n        this.props.getAllCouponsAction({\r\n            limit: defaultCouponsSize,\r\n            offset: 0\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.resetCouponComponentAction();\r\n    }\r\n\r\n    getNoOrders = () => <div className=\"no-orders\">There is No Coupons, Please Try After Some Time...</div>\r\n\r\n    render() {\r\n        let { coupons, refreshCoupons, userDetails, getAllCouponsAction, editCouponAction, resetCouponsData, showPopup } = this.props;\r\n        let title = `List of Coupons ${(coupons && coupons.count ? `- ${coupons.count}` : '')}`;\r\n        return (\r\n            <div className=\"coupons-container\">\r\n                <PageHeader\r\n                    header={title}\r\n                />\r\n                <div className=\"additional-feature\">\r\n                    <Link to={\"/coupons/add\"}>\r\n                        <Button label=\"Create Coupon\" />\r\n                    </Link>\r\n                </div>\r\n                {coupons ?\r\n                    <ListAllCouponsTable\r\n                        userDetails={userDetails}\r\n                        data={coupons}\r\n                        defaultCouponsSize={defaultCouponsSize}\r\n                        refreshCoupons={refreshCoupons}\r\n                        getAllCouponsAction={getAllCouponsAction}\r\n                        editCouponAction={editCouponAction}\r\n                        resetCouponsData={resetCouponsData}\r\n                        defaultLimit={defaultCouponsSize}\r\n                        showPopup={showPopup}\r\n                    /> :\r\n                    this.getNoOrders()\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        userDetails: state.userDetails,\r\n        coupons: state.couponsDetails.couponsList,\r\n        refreshCoupons: state.couponsDetails.refreshCoupons,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return bindActionCreators({ getAllCouponsAction, editCouponAction, resetCouponComponentAction, resetCouponsData, showPopup }, dispatch)\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ListAllCoupons);\r\n"],"sourceRoot":""}